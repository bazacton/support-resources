import{b1 as v,b2 as C,m as i,r as I,b3 as T,j as e,T as t,av as p,B as u,aZ as P,q as b,aX as c,L as x,H as k,aj as y,al as A,i as B,s as F,k as W,t as q}from"./client-OfhJa1Pp.js";import{i as H,j as L,g,h as N}from"./main-CqFMqK8-.js";import{I as E,u as _}from"./use-sync-website-content-DSZmts9m.js";import{t as K,S as Q}from"./sync-tags-button-CBK7H6fR.js";import{o as z}from"./online-articles-CqWeBVNj.js";import{G as M}from"./global-loading-progress-CKXIm6JS.js";import{D as R}from"./data-table-header-CeAVoFvI.js";import{D as V}from"./data-table-pagination-footer-CEEx1VtI.js";import{u as $}from"./use-datatable-search-params-CQGreY35.js";import{D as G}from"./data-table-emty-state-message-DLsG3g03.js";import{D as O}from"./datatable-filters-C2DdpqvR.js";import{a as X,D as Z,b as J,c as U}from"./datatable-page-with-header-layout-B1YkbSHJ.js";import{u as Y}from"./use-datatable-query-BQ-GXlzU.js";import{u as ee}from"./custom-menu-BbwshV9x.js";import{T as se}from"./table-BifRiqkr.js";import{B as te,a as h}from"./breadcrumb-DMWJORWM.js";import{C as ae}from"./chip-list-CkGaRoaT.js";import{A as ie}from"./Add-CN0r1QLK.js";import{S as re}from"./Sync-6-pU802x.js";import{V as oe}from"./Visibility-BkaRhH0o.js";import{C as ne}from"./confirmation-dialog-BIOq1A-h.js";import"./accordtion-animation-BGCK95Hj.js";import"./radio-Db_caP9D.js";import"./radio-group-DQLhD511.js";import"./section-helper-Cq13cJUI.js";import"./form-chip-field-sH5S7-lx.js";import"./FilterAlt-CXibH0wr.js";import"./select-filter-panel-C_zo36WK.js";import"./filter-operator-names-BZog1mvA.js";import"./select-Dsco87dL.js";import"./combobox-end-adornment-CaH5Sr_u.js";import"./normalized-model-field-COxh0lBC.js";import"./Edit-JNj6SFDx.js";import"./skeleton-Cp2m1Uyc.js";import"./accordion-DWEV-mKU.js";import"./checkbox-C4s6ROxp.js";import"./CheckBoxOutlineBlank-DQZJM1Yc.js";import"./formatted-number-DuD1Sa1W.js";import"./use-toggle-dashboard-left-sidebar-CnzMOFB9.js";import"./toggle-left-sidebar-icon-Dq5ZwqwZ.js";import"./ArrowDownward-mN9PlQJw.js";import"./useEffectEvent-DQn3o5L0.js";import"./is-ctrl-key-pressed-BWsUhNJl.js";import"./useGlobalListeners-CeWFSHKo.js";import"./ChevronRight-T5gg5A4x.js";import"./MoreHoriz-hMMIYAbm.js";const le=[{key:"name",width:"flex-3 min-w-200",visibleInMode:"all",header:()=>e.jsx(t,{message:"Website"}),body:s=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-6",children:[!!s.tags.length&&e.jsx(ae,{size:"xs",children:s.tags.slice(0,3).map(a=>e.jsx(c,{children:a},a))}),e.jsx(x,{to:`${s.id}/pages`,className:"block hover:underline",children:s.title})]}),e.jsx("a",{href:s.url,target:"_blank",rel:"noreferrer",className:"text-xs text-muted hover:underline",children:s.url})]})},{key:"fully_scanned",allowsSorting:!0,width:"w-144 flex-shrink-0",header:()=>e.jsx(t,{message:"Status"}),body:s=>s.scan_pending?e.jsx(c,{color:"danger",size:"xs",children:e.jsx(t,{message:"Scan pending"})}):e.jsx(c,{color:"positive",size:"xs",children:e.jsx(t,{message:"Scanned"})})},{key:"updatedAt",allowsSorting:!0,width:"w-96",header:()=>e.jsx(t,{message:"Last updated"}),body:s=>e.jsx("time",{children:e.jsx(k,{date:s.updated_at})})},{key:"actions",header:()=>e.jsx(t,{message:"Actions"}),width:"w-128 flex-shrink-0",hideHeader:!0,align:"end",visibleInMode:"all",body:s=>e.jsxs("div",{className:"text-muted",children:[e.jsx(y,{elementType:x,to:`${s.id}/pages`,disabled:s.scan_pending,children:e.jsx(oe,{})}),e.jsx(de,{websiteId:s.id})]})}],j=[{key:"scan_pending",label:i("Scan pending"),description:i("Whether website is queued for scanning"),defaultOperator:C.eq,control:{type:v.BooleanToggle,defaultValue:!0}},K(),H({label:i("First scanned"),description:i("Date website was first scanned")}),L({description:i("Date website was last updated")})];function as(){const[s,a]=I.useState([]),{aiAgentId:d}=ee(["aiAgentId"]),o=T(),{searchParams:n,sortDescriptor:f,mergeIntoSearchParams:m,setSearchQuery:D,isFiltering:w}=$(P),l=Y(g.websites.index(d,n)),S=e.jsxs(e.Fragment,{children:[e.jsx(Q,{taggableType:"aiAgentWebsite",selectedIds:s,onTagsSynced:()=>{b.invalidateQueries({queryKey:g.websites.invalidateKey}),a([])}}),e.jsxs(p,{type:"modal",children:[e.jsx(u,{variant:"flat",color:"danger",children:e.jsx(t,{message:"Delete"})}),e.jsx(me,{selectedIds:s,onDelete:()=>a([])})]})]});return e.jsxs(X,{children:[e.jsx(M,{query:l}),e.jsx(N,{children:e.jsx(t,{message:"Websites"})}),e.jsx(Z,{showSidebarToggleButton:!0,children:e.jsxs(te,{size:"xl",children:[e.jsx(h,{to:"../knowledge",children:e.jsx(t,{message:"Knowledge"})}),e.jsx(h,{to:"../knowledge/websites",children:e.jsx(t,{message:"Websites"})})]})}),e.jsxs(J,{children:[e.jsx(R,{searchValue:n.query,onSearchChange:D,filters:j,actions:e.jsxs(p,{type:"modal",children:[e.jsx(u,{startIcon:e.jsx(ie,{}),variant:"flat",color:"primary",children:e.jsx(t,{message:"Add website"})}),e.jsx(E,{})]}),selectedItems:s,selectedActions:S}),e.jsx(O,{filters:j}),e.jsxs(U,{children:[e.jsx(se,{columns:le,data:l.items,sortDescriptor:f,onSortChange:m,onAction:r=>o(`${r.id}/pages`),cellHeight:"h-64",selectedRows:s,onSelectionChange:a}),l.isEmpty?e.jsx(G,{image:z,isFiltering:w,title:e.jsx(t,{message:"No websites have been scanned yet"}),filteringTitle:e.jsx(t,{message:"No matching websites"})}):null,e.jsx(V,{query:l,onPageChange:r=>m({page:r}),onPerPageChange:r=>m({perPage:r})})]})]})]})}function de({websiteId:s}){const a=_();return e.jsx(y,{disabled:a.isPending,onClick:()=>{a.mutate({websiteId:s})},children:e.jsx(re,{})})}function me({selectedIds:s,onDelete:a}){const{close:d}=A(),o=B({mutationFn:()=>W.delete(`lc/ai-agent/websites/${s.join(",")}`),onSuccess:async()=>{await Promise.allSettled([b.invalidateQueries({queryKey:g.knowledge.invalidateKey})]),q(i("Websites deleted")),a(),d()},onError:n=>F(n)});return e.jsx(ne,{isDanger:!0,isLoading:o.isPending,title:e.jsx(t,{message:"Delete websites"}),body:e.jsx(t,{message:"Are you sure you want to delete selected websites?"}),confirm:e.jsx(t,{message:"Delete"}),onConfirm:()=>o.mutate()})}export{as as Component,j as filters};
