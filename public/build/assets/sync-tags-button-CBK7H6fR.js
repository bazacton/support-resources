import{m as a,b1 as o,b2 as l,j as e,av as j,B as u,T as t,ag as S,al as F,r as k,Z as D,ae as T,d as A,i as v,t as I,k as w,am as C,an as E,ap as O,aP as V,az as z,aq as B,l as M}from"./client-OfhJa1Pp.js";import{y as Q,i as _,j as q}from"./main-CqFMqK8-.js";import{o as P}from"./custom-menu-BbwshV9x.js";import{S as U}from"./section-helper-Cq13cJUI.js";import{F as H}from"./form-chip-field-sH5S7-lx.js";function N(r){return{key:"tags",label:a("Tags"),defaultOperator:l.has,operators:[l.has],control:{type:o.ChipField,autocompleteEndpoint:"helpdesk/normalized-models/tags",placeholder:a("Find tag"),defaultValue:[]},...r}}const W=[{key:"draft",label:a("Status"),defaultOperator:l.eq,control:{type:o.Select,options:[{key:"01",value:"",label:a("All")},{key:"02",value:!1,label:a("Published")},{key:"03",value:!0,label:a("Draft")}],defaultValue:"01"}},{key:"author_id",label:a("Author"),description:a("User this article was created by"),defaultOperator:l.eq,control:{type:o.SelectModel,model:Q}},N(),{key:"used_by_ai_agent",label:a("AI Agent status"),defaultOperator:l.eq,control:{type:o.Select,options:[{key:"01",value:!0,label:a("Used by AI agent")},{key:"02",value:!1,label:a("Not used by AI agent")}],defaultValue:"01"}},_({description:a("Date article was created")}),q({description:a("Date article was last updated")})];function X({selectedIds:r,taggableType:n,onTagsSynced:i}){return e.jsxs(j,{type:"modal",children:[e.jsx(u,{variant:"outline",endIcon:e.jsx(S,{}),children:e.jsx(t,{message:"Manage tags"})}),e.jsx(R,{selectedIds:r,taggableType:n,onTagsSynced:i})]})}function R({selectedIds:r,taggableType:n,onTagsSynced:i}){const{close:y,formId:g}=F(),[m,h]=k.useState(""),{data:c}=D(M.tags.index(m)),b=(c==null?void 0:c.tags)||[],{trans:x}=T(),d=A({defaultValues:{tags:[]}}),p=v({mutationFn:s=>w.post("hc/taggables/sync-tags",{taggableIds:r,taggableType:n,tags:s.map(f=>f.name)}),onSuccess:()=>{I(a("Tags synced successfully")),i()},onError:s=>P(s,d)});return e.jsxs(C,{size:"lg",children:[e.jsx(E,{children:e.jsx(t,{message:"Manage tags"})}),e.jsxs(O,{children:[e.jsx(V,{id:g,form:d,onSubmit:s=>p.mutate(s.tags),onBeforeSubmit:()=>{d.clearErrors()},children:e.jsx(H,{name:"tags",placeholder:x({message:"Type to search or create a new tag..."}),background:"bg",label:e.jsx(t,{message:"Select tags to apply"}),chipSize:"sm",suggestions:b,inputValue:m,onInputValueChange:h,children:s=>e.jsx(z,{value:s.name,children:e.jsx(t,{message:s.name})},s.name)})}),e.jsx(U,{className:"mt-24",color:"warning",size:"sm",description:e.jsx(t,{message:"This will attach selected tags and detach any tags that are not in the list."})})]}),e.jsxs(B,{children:[e.jsx(u,{onClick:()=>y(),children:e.jsx(t,{message:"Close"})}),e.jsx(u,{type:"submit",variant:"flat",color:"primary",form:g,disabled:p.isPending,children:e.jsx(t,{message:"Save"})})]})]})}export{W as A,X as S,N as t};
