import{r as u,aZ as x,j as e,T as a,av as h,B as j,L as l,H as D,aj as f,al as y,i as b,s as T,k as w,q as S}from"./client-OfhJa1Pp.js";import{A as C}from"./admin-config-tfY5n3F7.js";import{o as g,h as P}from"./main-CqFMqK8-.js";import{D as v}from"./settings-links-D22SAe6v.js";import{G as k}from"./global-loading-progress-CKXIm6JS.js";import{D as E}from"./data-table-add-item-button-2jwTYQ5G.js";import{D as B}from"./data-table-header-CeAVoFvI.js";import{D as H}from"./data-table-pagination-footer-CEEx1VtI.js";import{u as I}from"./use-datatable-search-params-CQGreY35.js";import{D as L}from"./data-table-emty-state-message-DLsG3g03.js";import{a as A,D as q,b as F,c as N}from"./datatable-page-with-header-layout-B1YkbSHJ.js";import{u as M}from"./use-datatable-query-BQ-GXlzU.js";import{T as Q}from"./table-BifRiqkr.js";import{F as R}from"./formatted-number-DuD1Sa1W.js";import{E as _}from"./Edit-JNj6SFDx.js";import{C as K}from"./confirmation-dialog-BIOq1A-h.js";import"./dashboard-icons-CHop3mns.js";import"./library-icon-CHCHM-UW.js";import"./messages-square-icon-CTmom_u4.js";import"./Delete-BhyMZiPM.js";import"./Home--R_oEr6a.js";import"./SupervisorAccount-k9OnPB-d.js";import"./Translate-Cs-ut2nW.js";import"./TextFields-8TfbEP0O.js";import"./custom-menu-BbwshV9x.js";import"./external-link-DbBk1ItZ.js";import"./book-open-Cbdc52Ur.js";import"./Add-CN0r1QLK.js";import"./FilterAlt-CXibH0wr.js";import"./select-filter-panel-C_zo36WK.js";import"./form-chip-field-sH5S7-lx.js";import"./chip-list-CkGaRoaT.js";import"./filter-operator-names-BZog1mvA.js";import"./select-Dsco87dL.js";import"./combobox-end-adornment-CaH5Sr_u.js";import"./normalized-model-field-COxh0lBC.js";import"./skeleton-Cp2m1Uyc.js";import"./accordion-DWEV-mKU.js";import"./accordtion-animation-BGCK95Hj.js";import"./checkbox-C4s6ROxp.js";import"./CheckBoxOutlineBlank-DQZJM1Yc.js";import"./use-toggle-dashboard-left-sidebar-CnzMOFB9.js";import"./toggle-left-sidebar-icon-Dq5ZwqwZ.js";import"./ArrowDownward-mN9PlQJw.js";import"./useEffectEvent-DQn3o5L0.js";import"./is-ctrl-key-pressed-BWsUhNJl.js";import"./useGlobalListeners-CeWFSHKo.js";const U=""+new URL("software-engineer-BUg928cK.svg",import.meta.url).href,z=[{key:"name",allowsSorting:!0,visibleInMode:"all",width:"flex-3 min-w-200",header:()=>e.jsx(a,{message:"Name"}),body:t=>t.name},{key:"times_fired",allowsSorting:!0,header:()=>e.jsx(a,{message:"Times used"}),body:t=>e.jsx(R,{value:t.times_fired})},{key:"updated_at",allowsSorting:!0,width:"w-100",header:()=>e.jsx(a,{message:"Last updated"}),body:t=>e.jsx(D,{date:t.updated_at})},{key:"actions",header:()=>e.jsx(a,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-42 flex-shrink-0",visibleInMode:"all",body:t=>e.jsx(f,{size:"md",className:"text-muted",elementType:l,to:`/admin/triggers/${t.id}/edit`,children:e.jsx(_,{})})}];function Qe(){const[t,s]=u.useState([]),{searchParams:o,sortDescriptor:i,mergeIntoSearchParams:r,setSearchQuery:d}=I(x),m=M({...g.triggers.index({...o})}),p=e.jsxs(h,{type:"modal",children:[e.jsx(j,{variant:"flat",color:"danger",children:e.jsx(a,{message:"Delete"})}),e.jsx(G,{selectedIds:t,onDelete:()=>s([])})]}),c=e.jsx(E,{elementType:l,to:"/admin/triggers/new",children:e.jsx(a,{message:"Add new trigger"})});return e.jsxs(A,{children:[e.jsx(P,{children:e.jsx(a,{message:"Triggers"})}),e.jsx(k,{query:m}),e.jsx(q,{title:e.jsx(a,{message:"Triggers"}),showSidebarToggleButton:!0,rightContent:e.jsx(v,{variant:"button",link:C.pages.triggers,size:"xs"})}),e.jsxs(F,{children:[e.jsx(B,{searchValue:o.query,onSearchChange:d,actions:c,selectedItems:t,selectedActions:p}),e.jsxs(N,{children:[e.jsx(Q,{columns:z,data:m.items,sortDescriptor:i,onSortChange:r,enableSelection:!0,selectedRows:t,onSelectionChange:s,cellHeight:"h-64"}),m.isEmpty?e.jsx(L,{image:U,title:e.jsx(a,{message:"No triggers have been created yet"}),filteringTitle:e.jsx(a,{message:"No matching triggers"})}):null,e.jsx(H,{query:m,onPageChange:n=>r({page:n}),onPerPageChange:n=>r({perPage:n})})]})]})]})}function G({selectedIds:t,onDelete:s}){const{close:o}=y(),i=b({mutationFn:()=>w.delete(`triggers/${t.join(",")}`),onSuccess:()=>{S.invalidateQueries({queryKey:g.triggers.invalidateKey}),s(),o()},onError:r=>T(r)});return e.jsx(K,{isDanger:!0,title:e.jsx(a,{message:"Delete triggers"}),body:e.jsx(a,{message:"Are you sure you want to delete selected triggers?"}),confirm:e.jsx(a,{message:"Delete"}),isLoading:i.isPending,onConfirm:()=>i.mutate()})}export{Qe as Component};
