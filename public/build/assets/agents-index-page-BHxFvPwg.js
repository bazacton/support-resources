import{h as x,aZ as j,l as h,j as e,T as a,av as g,aX as f,b7 as b,r as p,aw as v,aj as D,ax as S,az as m,L as u}from"./client-OfhJa1Pp.js";import{A as y}from"./admin-config-tfY5n3F7.js";import{T}from"./team-index-page-tabs-BgzP8ioE.js";import{I as A}from"./invite-agents-dialog-XG2VLdkU.js";import{c as C,u as I}from"./use-agent-permissions-CyKUrvAU.js";import{a as O,u as P}from"./use-compact-agents-VrJm5fj6.js";import{u as w}from"./use-is-module-installed-FCoToztC.js";import{t as N}from"./team-DYmDDGxN.js";import{D as k}from"./settings-links-D22SAe6v.js";import{u as E,B as M}from"./use-unban-users-TBy06zKy.js";import{D as B}from"./update-user-page-actions-D1Ivswsr.js";import{G as H}from"./global-loading-progress-CKXIm6JS.js";import{a as L}from"./name-with-avatar-DcHWBlN8.js";import{D as _}from"./data-table-add-item-button-2jwTYQ5G.js";import{D as z}from"./data-table-header-CeAVoFvI.js";import{D as R}from"./data-table-pagination-footer-CEEx1VtI.js";import{u as U}from"./use-datatable-search-params-CQGreY35.js";import{D as F}from"./data-table-emty-state-message-DLsG3g03.js";import{a as W,D as Q,b as $,c as q}from"./datatable-page-with-header-layout-B1YkbSHJ.js";import{u as G}from"./use-datatable-query-BQ-GXlzU.js";import{h as V}from"./main-CqFMqK8-.js";import{T as K}from"./table-BifRiqkr.js";import{O as X}from"./online-status-circle-QXiKm4xe.js";import{M as Z}from"./MoreHoriz-hMMIYAbm.js";import{S as J}from"./skeleton-Cp2m1Uyc.js";import"./dashboard-icons-CHop3mns.js";import"./library-icon-CHCHM-UW.js";import"./messages-square-icon-CTmom_u4.js";import"./Delete-BhyMZiPM.js";import"./Home--R_oEr6a.js";import"./SupervisorAccount-k9OnPB-d.js";import"./Translate-Cs-ut2nW.js";import"./TextFields-8TfbEP0O.js";import"./tabs-BfUlcoJh.js";import"./form-chip-field-sH5S7-lx.js";import"./chip-list-CkGaRoaT.js";import"./select-Dsco87dL.js";import"./combobox-end-adornment-CaH5Sr_u.js";import"./helpdesk-channel-CQKSbeKg.js";import"./external-link-DbBk1ItZ.js";import"./book-open-Cbdc52Ur.js";import"./custom-menu-BbwshV9x.js";import"./date-picker-CUWok1XJ.js";import"./paginated-resources-BrzANtLm.js";import"./confirmation-dialog-BIOq1A-h.js";import"./Add-CN0r1QLK.js";import"./FilterAlt-CXibH0wr.js";import"./select-filter-panel-C_zo36WK.js";import"./filter-operator-names-BZog1mvA.js";import"./normalized-model-field-COxh0lBC.js";import"./Edit-JNj6SFDx.js";import"./accordion-DWEV-mKU.js";import"./accordtion-animation-BGCK95Hj.js";import"./checkbox-C4s6ROxp.js";import"./CheckBoxOutlineBlank-DQZJM1Yc.js";import"./use-toggle-dashboard-left-sidebar-CnzMOFB9.js";import"./toggle-left-sidebar-icon-Dq5ZwqwZ.js";import"./ArrowDownward-mN9PlQJw.js";import"./useEffectEvent-DQn3o5L0.js";import"./is-ctrl-key-pressed-BWsUhNJl.js";import"./useGlobalListeners-CeWFSHKo.js";import"./HourglassEmpty-BpvqVftp.js";const Y=[{key:"name",allowsSorting:!0,visibleInMode:"all",sortingKey:"email",header:()=>e.jsx(a,{message:"Teammate"}),body:(s,t)=>e.jsx(L,{label:s.name,alwaysShowAvatar:!0,description:s.email,avatarCircle:!0})},{key:"role",header:()=>e.jsx(a,{message:"Role"}),body:s=>e.jsx(f,{className:"w-max capitalize",radius:"rounded-panel",size:"sm",children:s.role})},{key:"last_active_at",header:()=>e.jsx(a,{message:"Status"}),allowsSorting:!0,body:s=>e.jsx(ee,{agent:s})},{key:"actions",header:()=>e.jsx(a,{message:"Actions"}),hideHeader:!0,visibleInMode:"all",align:"end",width:"w-42 flex-shrink-0",body:s=>e.jsx(se,{agent:s})}];function ee({agent:s}){const t=w("livechat"),{isLoading:n}=O(),r=P(s.id);if(n)return e.jsx(J,{className:"max-w-100"});if(s.banned_at)return e.jsx(l,{color:"bg-danger",children:e.jsx(a,{message:"Suspended"})});if(r){if(!t)return e.jsx(l,{color:"bg-positive",children:e.jsx(a,{message:"Online"})})}else return e.jsx(l,{color:"bg-chip",children:e.jsx(a,{message:"Last seen: :date",values:{date:e.jsx(b,{date:s.last_active_at})}})});return s.accepts_conversations?e.jsx(l,{color:"bg-positive",children:e.jsx(a,{message:"Accepting conversations"})}):e.jsx(l,{color:"bg-danger",children:e.jsx(a,{message:"Not accepting conversations"})})}const l=({color:s,children:t})=>e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx(X,{color:s}),t]});function se({agent:s}){const t=E([s.id]),[n,r]=p.useState(!1),[c,d]=p.useState(!1),i=I(s.id);return e.jsxs(p.Fragment,{children:[e.jsx(g,{type:"modal",isOpen:n,onOpenChange:r,children:e.jsx(B,{userId:s.id})}),e.jsx(g,{type:"modal",isOpen:c,onOpenChange:d,children:e.jsx(M,{userIds:[s.id]})}),e.jsxs(v,{children:[e.jsx(D,{size:"md",className:"text-muted",children:e.jsx(Z,{})}),e.jsxs(S,{children:[i&&e.jsx(m,{value:"edit",elementType:u,to:`${s.id}/details`,children:e.jsx(a,{message:"Edit"})}),e.jsx(m,{value:"reports",elementType:u,to:`/dashboard/reports/agents/${s.id}`,children:e.jsx(a,{message:"View reports"})}),i&&(s.banned_at?e.jsx(m,{value:"suspend",onSelected:()=>t.mutate(),children:e.jsx(a,{message:"Reactivate"})}):e.jsx(m,{value:"suspend",onSelected:()=>d(!0),children:e.jsx(a,{message:"Suspend"})})),i&&e.jsx(m,{value:"delete",className:"text-danger",onSelected:()=>r(!0),children:e.jsx(a,{message:"Delete"})})]})]})]})}function cs(){const s=x(),{searchParams:t,sortDescriptor:n,mergeIntoSearchParams:r,setSearchQuery:c,isFiltering:d}=U(j),i=G(h.agents.index(t));return e.jsxs(W,{children:[e.jsx(H,{query:i}),e.jsx(V,{children:e.jsx(a,{message:"Team - Agents"})}),e.jsx(Q,{title:e.jsx(a,{message:"Team"}),showSidebarToggleButton:!0,border:"border-none",rightContent:e.jsx(k,{variant:"button",link:y.pages.team,size:"xs"})}),e.jsx(T,{}),e.jsxs($,{children:[e.jsx(z,{searchValue:t.query,onSearchChange:c,actions:e.jsx(ae,{})}),e.jsxs(q,{children:[e.jsx(K,{columns:Y,data:i.items,sortDescriptor:n,onSortChange:r,enableSelection:!1,cellHeight:"h-70",onAction:o=>{C(o.id)&&s(`${o.id}/details`)}}),i.isEmpty&&e.jsx(F,{isFiltering:d,className:"mt-44",image:N,title:e.jsx(a,{message:"No agents have been created yet"}),filteringTitle:e.jsx(a,{message:"No matching agents"})}),e.jsx(R,{hideIfOnlyOnePage:!0,query:i,onPageChange:o=>r({page:o}),onPerPageChange:o=>r({perPage:o})})]})]})]})}function ae(){return e.jsxs(g,{type:"modal",children:[e.jsx(_,{children:e.jsx(a,{message:"Invite teammates"})}),e.jsx(A,{})]})}export{cs as Component};
