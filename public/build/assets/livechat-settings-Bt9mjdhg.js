import{d as H,j as e,m as l,T as t,f as N,r as f,p as te,F as u,u as R,B as F,aw as se,ax as ae,az as b,aG as O,l as ie,e as j,aR as L,aj as ne,L as I,aL as J,cu as oe,cv as re}from"./client-OfhJa1Pp.js";import{A as ce}from"./admin-config-tfY5n3F7.js";import{D as $}from"./settings-links-D22SAe6v.js";import{u as E}from"./settings-layout-ByStjXMl.js";import{S,a as T,u as le}from"./settings-section-button-TsaY1Jcy.js";import{u as D}from"./use-admin-settings-BobgiTFU.js";import{C as K}from"./checkbox-C4s6ROxp.js";import{a as w}from"./settings-panel-C0KhHeWz.js";import{MenuItemsManager as me}from"./menu-settings-C4_PhcCm.js";import{B as de}from"./background-selector-BILI5Vtb.js";import{u as Y}from"./use-clipboard-DVaYjxFN.js";import{A as ue}from"./attributes-manager-B56TrvQx.js";import{A as ge,P as he}from"./main-CqFMqK8-.js";import{F as z}from"./image-selector-Bwr5VwEQ.js";import{F as _}from"./select-Dsco87dL.js";import{w as B}from"./widget-navigation-DzRrm2db.js";import{D as xe}from"./DragIndicator-BbWWPJ1P.js";import{m as pe,u as je}from"./use-sortable-DQoLtUe2.js";import{ThemeEditor as be}from"./themes-settings-page-BSMPRjUC.js";import{L as V}from"./external-link-DbBk1ItZ.js";import{A as P}from"./ArrowRight-BuqZHXGI.js";import{A as fe}from"./ArrowBack-DcV9hHRo.js";import{I as ve}from"./Info-tjnOYMTt.js";import{A as we,a as ye}from"./accordion-DWEV-mKU.js";import{I as Se}from"./install-module-card-DeCstsj1.js";import{A as Ne,a as ke}from"./AssignmentInd-Cjch7uuG.js";import{C as Ce}from"./Chat-Ct1un6CP.js";import{R as Te}from"./Route-BmvB1Yb9.js";import{T as Ie,a as We,b as Ae}from"./tabs-BfUlcoJh.js";import"./dashboard-icons-CHop3mns.js";import"./library-icon-CHCHM-UW.js";import"./messages-square-icon-CTmom_u4.js";import"./Delete-BhyMZiPM.js";import"./Home--R_oEr6a.js";import"./SupervisorAccount-k9OnPB-d.js";import"./Translate-Cs-ut2nW.js";import"./TextFields-8TfbEP0O.js";import"./book-open-Cbdc52Ur.js";import"./custom-menu-BbwshV9x.js";import"./use-admin-settings-page-nav-config-BVX-w9YX.js";import"./datatable-page-with-header-layout-B1YkbSHJ.js";import"./use-toggle-dashboard-left-sidebar-CnzMOFB9.js";import"./toggle-left-sidebar-icon-Dq5ZwqwZ.js";import"./file-upload-provider-DTPBUrkd.js";import"./uploaded-file-DN6fXT4v.js";import"./pretty-bytes-bO14ePu9.js";import"./with-selector-CDgEpx5P.js";import"./useMutationState-V1q6F41O.js";import"./blocker-dialog-B5ey95II.js";import"./confirmation-dialog-BIOq1A-h.js";import"./OpenInFull-HWkxb3KN.js";import"./CheckBoxOutlineBlank-DQZJM1Yc.js";import"./add-menu-item-dialog-BrOOUadi.js";import"./permission-selector-IaWi5pV6.js";import"./uc-first-pSl3nM3z.js";import"./form-chip-field-sH5S7-lx.js";import"./chip-list-CkGaRoaT.js";import"./Edit-JNj6SFDx.js";import"./use-previous-Ce5tCQ26.js";import"./skeleton-Cp2m1Uyc.js";import"./use-filter-KNtT5Txy.js";import"./Add-CN0r1QLK.js";import"./combobox-end-adornment-CaH5Sr_u.js";import"./accordtion-animation-BGCK95Hj.js";import"./isScrollable-BSEN4xi5.js";import"./use-droppable-DqkAoZym.js";import"./useGlobalListeners-CeWFSHKo.js";import"./color-picker-dialog-C1vQg-H6.js";import"./FormatColorFill-8XiV_8LV.js";import"./ArrowDownward-mN9PlQJw.js";import"./ArrowForward-COs0hk5q.js";import"./ArrowUpward-0cWC32BO.js";import"./Image-CLhNm6Gt.js";import"./css-props-from-bg-config-CgypBlFP.js";import"./radio-group-DQLhD511.js";import"./radio-Db_caP9D.js";import"./simple-background-position-selector-DK2xckgz.js";import"./pretty-attribute-type-CZh-32ZO.js";import"./Lock-CrI8g69F.js";import"./group-array-by-5IjT7qk6.js";import"./use-active-upload-CCDRf1Tl.js";import"./open-upload-window-CSDcieK1.js";import"./shallow-BSWIanyL.js";import"./AddAPhoto-eWqbbo4Z.js";import"./progress-bar-iRLStr1h.js";import"./file-input-config-DrcTpI3-.js";import"./websocket-updates-notifier-CaEDKM_o.js";import"./helpdesk-channel-CQKSbeKg.js";import"./Help-DaN2Y9a4.js";import"./HelpOutline-BWHaeyMp.js";import"./MoreVert-Ci70_mZh.js";import"./RestartAlt-BBLLDvr_.js";import"./Tune-DusFnn8x.js";import"./font-selector-X9xeL-3L.js";import"./OpenInNew-Q67MT6Ae.js";const Pe=l("When agent has not responded for :minutes minutes, transfer customer to another available agent."),Le=l("When there are no messages for :minutes minutes, mark chat as inactive."),Ve=l("When there are no messages for :minutes minutes, close the chat."),Fe=l("Delete inactive visitors after :days days");function De(){var i,n,o,c,m,r,d,g;const{data:a}=D(),s=H({defaultValues:{client:{lc:{timeout:{agent:((n=(i=a.client.lc)==null?void 0:i.timeout)==null?void 0:n.agent)??null,inactive:((c=(o=a.client.lc)==null?void 0:o.timeout)==null?void 0:c.inactive)??null,archive:((r=(m=a.client.lc)==null?void 0:m.timeout)==null?void 0:r.archive)??null,pruneVisitor:((g=(d=a.client.lc)==null?void 0:d.timeout)==null?void 0:g.pruneVisitor)??null}}}}});return e.jsxs(S.Form,{form:s,children:[e.jsx(W,{name:"client.lc.timeout.agent",defaultValue:5,label:Pe,description:e.jsx(t,{message:"If chat is in a group with manual assignment, chat will be put into queue instead."})}),e.jsx(W,{name:"client.lc.timeout.inactive",defaultValue:10,label:Le,description:e.jsx(t,{message:"Inactive chats are not included in agents' concurrent chats limit."})}),e.jsx(W,{name:"client.lc.timeout.archive",defaultValue:15,label:Ve,description:e.jsx(t,{message:"Customers can reopen closed chats by sending a new message to that chat."})}),e.jsx(W,{name:"client.lc.timeout.pruneVisitor",labelValueName:"days",defaultValue:7,label:Fe,description:e.jsx(t,{message:"This will only delete visitors that were created via chat widget and had no interaction with the widget or support site."})})]})}function W({name:a,defaultValue:s,label:i,labelValueName:n="minutes",description:o}){const{getValues:c,setValue:m}=N(),[r,d]=f.useState(()=>!!c(a)),g=()=>{r?(d(!1),m(a,null,{shouldDirty:!0})):(d(!0),m(a,s,{shouldDirty:!0}))};return e.jsxs("div",{className:"mb-16 flex h-100 select-none items-start gap-14 rounded-panel border p-16",onClick:()=>g(),children:[e.jsx(K,{checked:r}),e.jsxs("div",{className:te(!r&&"opacity-60"),children:[e.jsx("div",{className:"mb-6 text-sm",children:e.jsx(t,{message:i.message,values:{[n]:e.jsx(u,{name:a,size:"2xs",type:"number",className:"mx-4 inline-block max-w-60",onClick:p=>p.stopPropagation()})}})}),e.jsx("div",{className:"text-xs text-muted",children:o})]})]})}function Me(){const{base_url:a}=R(),[s,i]=Y(`${a}/livechat`,{successDuration:1e3});return e.jsxs("div",{children:[e.jsx("div",{className:"text-sm",children:e.jsx(t,{message:"Share a link to direct chat page without needing to install chat widget on your website."})}),e.jsx(F,{className:"mb-24 mt-6",variant:"outline",color:"primary",size:"xs",onClick:()=>i(),children:s?e.jsx(t,{message:"Link copied!"}):e.jsx(t,{message:"Copy chat link"})}),e.jsx(u,{name:"client.chatPage.title",label:e.jsx(t,{message:"Title"}),className:"mb-16"}),e.jsx(u,{name:"client.chatPage.subtitle",label:e.jsx(t,{message:"Subtitle"}),className:"mb-16",inputElementType:"textarea",rows:2})]})}function ze(){return e.jsxs("div",{children:[e.jsx(u,{name:"client.chatWidget.defaultMessage",label:e.jsx(t,{message:"Welcome message"}),className:"mb-16",required:!0}),e.jsx(u,{name:"client.chatWidget.inputPlaceholder",label:e.jsx(t,{message:"Input placeholder"}),className:"mb-16",required:!0}),e.jsx(u,{name:"client.chatWidget.agentsAwayMessage",label:e.jsx(t,{message:"No agents available"}),className:"mb-16",inputElementType:"textarea",rows:4,required:!0}),e.jsx(u,{name:"client.chatWidget.inQueueMessage",label:e.jsx(t,{message:"Customer is in queue"}),inputElementType:"textarea",rows:6,required:!0})]})}const He=[],Re=ie.attributes.normalizedList({for:"agent"}),A=[{key:"client.chatWidget.forms.preChat",label:l("Pre-chat form")},{key:"client.chatWidget.forms.postChat",label:l("Post-chat form")}];function Ee(){const a=E(o=>o.setPreviewRoute),[s,i]=f.useState(A[0].key),n=A.find(o=>o.key===s)??A[0];return e.jsxs("div",{children:[e.jsxs(se,{selectionMode:"single",selectedValue:s,onSelectionChange:o=>{o.endsWith("preChat")?a(x.preChatForm.route):a(x.postChatForm.route),i(o)},children:[e.jsx(F,{variant:"outline",endIcon:e.jsx(ge,{}),className:"mb-24",children:e.jsx(t,{...n.label})}),e.jsx(ae,{children:A.map(o=>e.jsx(b,{value:o.key,children:e.jsx(t,{...o.label})},o.key))})]}),e.jsx(_e,{formKey:n.key},n.key)]})}function _e({formKey:a}){const{setValue:s}=N(),i=O({name:`${a}.attributes`})||He,n=o=>{s(`${a}.attributes`,o,{shouldDirty:!0})};return e.jsxs("div",{children:[e.jsx(u,{name:`${a}.information`,label:e.jsx(t,{message:"Information"}),inputElementType:"textarea",rows:2,className:"mb-12"}),e.jsx("div",{className:"mb-4 text-sm",children:e.jsx(t,{message:"Attributes"})}),e.jsx(ue,{queryOptions:Re,selectedAttributeIds:i,onChange:n}),e.jsx("div",{className:"mt-24 border-t pt-24",children:e.jsx(j,{name:`${a}.disabled`,description:e.jsx(t,{message:"Form will not be visible to customers when disabled."}),children:e.jsx(t,{message:"Disabled"})})})]})}function Be(){return e.jsxs("div",{children:[e.jsx(z,{name:"client.chatWidget.launcherIcon",label:e.jsx(t,{message:"Custom icon"}),uploadType:L.brandingImages,showRemoveButton:!0,className:"mb-16"}),e.jsxs(_,{selectionMode:"single",name:"client.chatWidget.position",label:e.jsx(t,{message:"Position"}),className:"mb-16",children:[e.jsx(b,{value:"left",children:e.jsx(t,{message:"Left"})}),e.jsx(b,{value:"right",children:e.jsx(t,{message:"Right"})})]}),e.jsx(u,{type:"number",name:"client.chatWidget.spacing.side",label:e.jsx(t,{message:"Side spacing"}),endAdornment:e.jsx("div",{className:"text-sm",children:"px"}),className:"mb-16"}),e.jsx(u,{type:"number",name:"client.chatWidget.spacing.bottom",label:e.jsx(t,{message:"Bottom spacing"}),endAdornment:e.jsx("div",{className:"text-sm",children:"px"}),className:"mb-16"}),e.jsx(j,{name:"client.chatWidget.hide",description:e.jsx(t,{message:"When enabled, chat launcher will be hidden by default and will need to be shown manually via API."}),children:e.jsx(t,{message:"Hide launcher"})})]})}function Ue(){return e.jsxs("div",{children:[e.jsxs(_,{name:"client.chatWidget.defaultScreen",selectionMode:"single",label:e.jsx(t,{message:"Default screen"}),className:"mb-16",children:[B.map(a=>e.jsx(b,{value:a.route,children:e.jsx(t,{...a.label})},a.route)),e.jsx(b,{value:"conversations/new",children:e.jsx(t,{message:"New chat"})}),e.jsx(b,{value:"tickets/new",children:e.jsx(t,{message:"New ticket"})})]}),e.jsx(j,{name:"client.chatWidget.hideNavigation",className:"mb-16",children:e.jsx(t,{message:"Hide bottom navigation"})}),e.jsx(qe,{})]})}function qe(){const a=B.map(c=>c.route),s=N(),i=()=>s.getValues("client.chatWidget.screens")||[],[n,o]=f.useState(()=>{const c=i(),m=r=>c.includes(r)?c.indexOf(r):c.length;return[...a].sort((r,d)=>m(r)-m(d))});return e.jsxs("div",{children:[e.jsx(w,{margin:"mt-24 mb-6",size:"sm",children:e.jsx(t,{message:"Screens"})}),n.map(c=>e.jsx(Ge,{item:c,items:n,onToggle:(m,r)=>{const d=i(),g=r?[...d,m]:d.filter(p=>p!==m);s.setValue("client.chatWidget.screens",g,{shouldDirty:!0})},onSortEnd:(m,r)=>{const d=pe(n,m,r);o(d);const g=i(),p=d.filter(v=>g.includes(v)).map(v=>v);s.setValue("client.chatWidget.screens",p,{shouldDirty:!0})}},c))]})}function Ge({item:a,items:s,onToggle:i,onSortEnd:n}){const o=f.useRef(null),{watch:c}=N(),{sortableProps:m,dragHandleRef:r}=je({item:a,items:s,type:"widgetScreensSortable",ref:o,onSortEnd:n,strategy:"liveSort"}),g=(c("client.chatWidget.screens")||[]).includes(a),p=B.find(v=>v.route===a).label;return e.jsx(T,{ref:o,elementType:"div",startIcon:e.jsx(ne,{ref:r,size:"sm",children:e.jsx(xe,{className:"text-muted hover:cursor-move"})}),endIcon:e.jsx(K,{checked:g,onChange:()=>i(a,!g)}),...m,children:e.jsx(t,{...p})})}function $e(){const{setActiveSection:a}=k();return e.jsxs("div",{children:[e.jsx(Oe,{}),e.jsx(w,{margin:"mb-16",size:"sm",children:e.jsx(t,{message:"Themes"})}),e.jsxs(_,{selectionMode:"single",name:"client.chatWidget.defaultTheme",label:e.jsx(t,{message:"Default widget theme"}),className:"mb-16",children:[e.jsx(b,{value:"light",children:e.jsx(t,{message:"Light"})}),e.jsx(b,{value:"dark",children:e.jsx(t,{message:"Dark"})}),e.jsx(b,{value:"system",children:e.jsx(t,{message:"System"})})]}),e.jsx(j,{className:"mb-24",name:"client.chatWidget.inheritThemes",description:e.jsx(t,{message:"Use themes configured <a>globally</a>, or set unique colors for chat widget.",values:{a:s=>e.jsx(I,{className:V,to:"/admin/settings/themes",target:"_blank",children:s})}}),children:e.jsx(t,{message:"Use global themes"})}),e.jsx(T,{onClick:()=>a("themesEditor"),endIcon:e.jsx(P,{className:"text-muted"}),children:e.jsx(t,{message:"Customize widget themes"})})]})}function Qe(){return e.jsxs(M,{backLabel:e.jsx(t,{message:"Style"}),children:[e.jsx(t,{message:"Customize widget themes"}),e.jsx(be,{size:"lg",type:"chatWidget"})]})}function Oe(){return e.jsxs("div",{className:"mb-28 border-b border-b-divider-lighter pb-28",children:[e.jsxs(w,{margin:"mb-16",size:"sm",children:[e.jsx(t,{message:"Logos"}),e.jsx(t,{message:"Use a JPG, PNG, or GIF smaller than 100KB. 50px by 50px works best."})]}),e.jsxs("div",{className:"flex items-center gap-24",children:[e.jsx(z,{name:"client.chatWidget.logo_dark",label:e.jsx(t,{message:"Light mode"}),uploadType:L.brandingImages,className:"min-w-[186px] max-w-max",defaultValue:"images/logo-dark-mobile.png"}),e.jsx(z,{name:"client.chatWidget.logo_light",label:e.jsx(t,{message:"Dark mode"}),uploadType:L.brandingImages,className:"min-w-[186px] max-w-max",defaultValue:"images/logo-light-mobile.png"})]})]})}const x={home:{route:"lc/widget",label:l("Home")},conversation:{route:"lc/widget/conversations/new",label:l("Conversation")},preChatForm:{route:"lc/widget/conversations/new?form=preChat",label:l("Pre-chat form")},postChatForm:{route:"lc/widget/conversations/new?form=postChat",label:l("Post-chat form")},messages:{route:"lc/widget/conversations",label:l("Messages")},chatPage:{route:"livechat",label:l("Chat page")}},y=[{name:"widget",label:l("Widget"),categories:[{label:l("Home screen"),route:x.home.route,name:"homeScreen",sections:["background","messages","links"],component:Ke},{label:l("Chat screen"),route:x.conversation.route,name:"chatScreen",component:ze},{label:l("Launcher"),route:x.home.route,name:"launcher",component:Be},{label:l("Style"),route:x.home.route,name:"style",sections:["themesEditor"],component:$e},{label:l("Active screens"),route:x.home.route,name:"screens",component:Ue},{label:l("Forms"),route:x.preChatForm.route,name:"forms",component:Ee},{label:l("Chat page"),route:x.chatPage.route,name:"chatPage",component:Me}]},{name:"timeouts",label:l("Timeouts")},{name:"install",label:l("Install")},{name:"security",label:l("Security")}];function k(){const a=E(h=>h.setPreviewRoute),[s,i]=J(),n=s.get("tab")||"appearance";let o=y.findIndex(h=>h.name===n);o===-1&&(o=0);const c=h=>{const C=y[h];C&&(i({tab:C.name},{replace:!0}),a(x.home.route))},m=y[o],r="categories"in m?m.categories:[],d=s.get("category"),g=r.findIndex(h=>h.name===d),p=r[g],v=h=>{if(!h){i({tab:n},{replace:!0}),a(x.home.route);return}const C=r.find(ee=>ee.name===h);C&&(i({category:h,tab:n},{replace:!0}),a(C.route))},U=p&&"sections"in p?p.sections:[],q=s.get("section"),X=U.findIndex(h=>h===q),Z=h=>{d&&(h===null?i({tab:n,category:d},{replace:!0}):U.includes(h)&&i({section:h,tab:n,category:d},{replace:!0}))};let G=x.home.route;return g>-1&&r[g].route&&(G=r[g].route),{activeTabName:n,activeTabIndex:o,setActiveTab:c,activeCategoryName:d,activeCategoryIndex:g,setActiveCategory:v,activeSectionName:q,activeSectionIndex:X,setActiveSection:Z,activeUri:G}}function Je(){const[a]=J(),s=a.get("tab"),i=a.get("category");if(s&&i){const n=y.find(c=>c.name===s),o=n&&"categories"in n?n.categories.find(c=>c.name===i):null;if(o!=null&&o.route)return o.route}return x.home.route}function M({backLabel:a,children:s}){const{setActiveSection:i}=k();return e.jsxs("div",{children:[e.jsx(F,{variant:"outline",onClick:()=>i(null),startIcon:e.jsx(fe,{}),className:"mb-24",children:a}),e.jsx(w,{children:s[0]}),s[1]]})}function Ke(){const{setActiveSection:a}=k(),s=N(),i=O({control:s.control,name:"client.chatWidget.showHcCard"});return e.jsxs("div",{children:[e.jsx(j,{className:"mb-24",name:"client.chatWidget.showAvatars",description:e.jsx(t,{message:"Whether active agent avatars should be visible."}),children:e.jsx(t,{message:"Show avatars"})}),e.jsx(T,{onClick:()=>a("background"),endIcon:e.jsx(P,{className:"text-muted"}),children:e.jsx(t,{message:"Background"})}),e.jsx(w,{margin:"mt-24 mb-6",size:"sm",children:e.jsx(t,{message:"Content"})}),e.jsx(T,{onClick:()=>a("messages"),endIcon:e.jsx(P,{className:"text-muted"}),children:e.jsx(t,{message:"Messages"})}),e.jsx(T,{onClick:()=>a("links"),endIcon:e.jsx(P,{className:"text-muted"}),children:e.jsx(t,{message:"Links"})}),e.jsx(j,{className:"mt-14",name:"client.chatWidget.showHcCard",children:e.jsx(t,{message:"Show help center card"})}),i&&e.jsx(j,{className:"mt-14",name:"client.chatWidget.hideHomeArticles",children:e.jsx(t,{message:"Hide suggested articles"})}),e.jsx(j,{name:"client.chatWidget.homeShowTickets",className:"mt-14",children:e.jsx(t,{message:"Show tickets section"})})]})}function Ye(){const{watch:a,setValue:s}=N();return e.jsxs(M,{backLabel:e.jsx(t,{message:"Home screen"}),children:[e.jsx(t,{message:"Background"}),e.jsx(de,{uploadType:L.brandingImages,value:a("client.chatWidget.background"),onChange:i=>{const n=oe(i);delete n.label,s("client.chatWidget.background",n,{shouldDirty:!0})},underTabs:e.jsx(j,{name:"client.chatWidget.fadeBg",className:"mb-20",children:e.jsx(t,{message:"Fade background"})})})]})}function Xe(){return e.jsxs(M,{backLabel:e.jsx(t,{message:"Home screen"}),children:[e.jsx(t,{message:"Messages"}),e.jsxs("div",{children:[e.jsx(u,{name:"client.chatWidget.greeting",label:e.jsx(t,{message:"Greeting"}),className:"mb-16",description:e.jsx(t,{message:"Greeting for when user name is available."})}),e.jsx(u,{name:"client.chatWidget.greetingAnonymous",label:e.jsx(t,{message:"Anonymous greeting"}),className:"mb-16",description:e.jsx(t,{message:"Greeting for when user name is not available."})}),e.jsx(u,{name:"client.chatWidget.introduction",label:e.jsx(t,{message:"Introduction"})}),e.jsx(w,{margin:"mt-24 mb-6",size:"sm",children:e.jsx(t,{message:"Chats"})}),e.jsx(u,{name:"client.chatWidget.homeNewChatTitle",label:e.jsx(t,{message:"New chat title"}),className:"mb-16"}),e.jsx(u,{name:"client.chatWidget.homeNewChatSubtitle",label:e.jsx(t,{message:"New chat description"})}),e.jsx(w,{margin:"mt-24 mb-16",size:"sm",children:e.jsx(t,{message:"Tickets"})}),e.jsx(j,{name:"client.chatWidget.homeShowTickets",className:"mb-16",children:e.jsx(t,{message:"Show tickets section"})}),e.jsx(u,{name:"client.chatWidget.homeNewTicketTitle",label:e.jsx(t,{message:"New ticket title"}),className:"mb-16"}),e.jsx(u,{name:"client.chatWidget.homeNewTicketSubtitle",label:e.jsx(t,{message:"New ticket description"})}),e.jsxs("div",{className:"mt-24 text-sm text-muted",children:[e.jsx(ve,{size:"xs",className:"mr-4"}),e.jsx(t,{message:"You can translate these messages from <a>localizations page.</a>",values:{a:a=>e.jsx(I,{className:V,to:"/admin/localizations",target:"_blank",children:a})}})]})]})]})}function Ze(){return e.jsx(f.Fragment,{children:e.jsxs(M,{backLabel:e.jsx(t,{message:"Home screen"}),children:[e.jsx(t,{message:"Links"}),e.jsx(me,{formPath:"client.chatWidget.homeLinks"})]})})}const et=y[0].categories;function tt(){var n,o,c,m;const{data:a}=D(),s=a.client.chatWidget??{},i=H({defaultValues:{themes:a.themes.filter(r=>r.type==="chatWidget"),client:{chatWidget:{logo_light:s.logo_light??"",logo_dark:s.logo_dark??"",showAvatars:s.showAvatars??!0,background:s.background??{},fadeBg:s.fadeBg??!0,showHcCard:s.showHcCard??!0,hideHomeArticles:s.hideHomeArticles??!1,greeting:s.greeting??"",greetingAnonymous:s.greetingAnonymous??"",introduction:s.introduction??"",homeNewChatTitle:s.homeNewChatTitle??"",homeNewChatSubtitle:s.homeNewChatSubtitle??"",homeShowTickets:s.homeShowTickets??!1,homeNewTicketTitle:s.homeNewTicketTitle??"",homeNewTicketSubtitle:s.homeNewTicketSubtitle??"",homeLinks:s.homeLinks??[],launcherIcon:s.launcherIcon??"",position:s.position??"right",spacing:{side:((n=s.spacing)==null?void 0:n.side)??"16",bottom:((o=s.spacing)==null?void 0:o.bottom)??"16"},hide:s.hide??!1,defaultTheme:s.defaultTheme??"light",inheritThemes:s.inheritThemes??!1,defaultScreen:s.defaultScreen??"/",hideNavigation:s.hideNavigation??!1,screens:s.screens??[],forms:s.forms??{preChat:{disabled:!1,attributes:[]},postChat:{disabled:!1,attributes:[]}},defaultMessage:s.defaultMessage??"",inputPlaceholder:s.inputPlaceholder??"",agentsAwayMessage:s.agentsAwayMessage??"",inQueueMessage:s.inQueueMessage??""},chatPage:{title:((c=a.client.chatPage)==null?void 0:c.title)??"",subtitle:((m=a.client.chatPage)==null?void 0:m.subtitle)??""}}}});return e.jsx(S.Form,{form:i,mergePreviewSettings:!1,children:e.jsx(st,{})})}function st(){const{activeSectionName:a,activeCategoryName:s,setActiveCategory:i}=k();return a==="background"?e.jsx(Ye,{}):a==="messages"?e.jsx(Xe,{}):a==="links"?e.jsx(Ze,{}):a==="themesEditor"?e.jsx(Qe,{}):e.jsx(we,{expandedValues:s?[s]:[],onExpandedChange:([n])=>{i(n)},size:"lg",variant:"outline",children:et.map(n=>{const o=n.component;return e.jsx(ye,{label:e.jsx(t,{...n.label}),value:n.name,children:e.jsx(o,{})},n.name)})})}function at(){return e.jsxs("div",{className:"prose-col prose prose-sm dark:prose-invert prose-p:text-main",children:[e.jsx("p",{children:e.jsx(t,{message:"To install livechat widget on your site, copy and paste this code snippet before the </body> tag on every page you want the widget to appear."})}),e.jsx(Q,{}),e.jsx("p",{children:e.jsx(t,{message:"If your helpdesk is on a different domain than the loader script, or you need to specify the domain manuallly for some other reason, you can specify it via settings:"})}),e.jsx(Q,{showDomainSettings:!0})]})}function Q({showDomainSettings:a=!1}){const s=f.useRef(null),{base_url:i}=R();return f.useEffect(()=>{s.current&&re(s.current,"dark",!0)},[]),e.jsx("pre",{ref:s,children:e.jsxs("code",{children:[a&&`<script>
  window.BeChatSettings = {
    widgetDomain: "https://your-site.com",
  };
<\/script>
`,`<script src="${i}/livechat-loader.js"><\/script>`]})})}const it=({currentLocation:a,nextLocation:s})=>{const i=new URLSearchParams(a.search).get("tab"),n=new URLSearchParams(s.search).get("tab");return i===n};function Xs(){const a=Je(),{modules:s}=R();return s.livechat.installed?e.jsxs(S,{title:e.jsx(t,{message:"Livechat"}),gridCols:"grid-cols-[1fr,auto]",allowNavigation:it,defaultRoute:a,availableRoutes:x,docsLink:ce.settings.liveChat,children:[e.jsxs(S.Content,{width:"w-auto",children:[e.jsxs("div",{className:"mb-24",children:[e.jsxs("div",{className:"flex items-center gap-8 text-sm",children:[e.jsx(Te,{size:"sm",className:"text-primary"}),e.jsx(I,{to:"/admin/triggers",className:V,target:"_blank",children:e.jsx(t,{message:"Route conversations to groups by creating a trigger"})})]}),e.jsxs("div",{className:"mt-14 flex items-center gap-8 text-sm",children:[e.jsx(Ne,{size:"sm",className:"text-primary"}),e.jsx(I,{to:"/dashboard/team/groups/1/edit",className:V,target:"_blank",children:e.jsx(t,{message:"Set conversation assignment strategy"})})]})]}),e.jsx(nt,{})]}),e.jsx(rt,{})]}):e.jsx(mt,{})}function nt(){const{activeTabIndex:a,setActiveTab:s}=k();return e.jsxs(f.Fragment,{children:[e.jsx(Ie,{selectedTab:a,onTabChange:s,children:e.jsx(We,{children:y.map(i=>e.jsx(Ae,{children:e.jsx(t,{...i.label})},i.name))})}),e.jsx("div",{className:"pt-24",children:e.jsx(ot,{})})]})}function ot(){const{activeTabName:a}=k();switch(a){case"timeouts":return e.jsx(De,{});case"security":return e.jsx(ct,{});case"install":return e.jsx(at,{});default:return e.jsx(tt,{})}}function rt(){const a=E(i=>i.setIframeWindow),s=le();return e.jsx("div",{className:"col-[2/-1] row-[2/-1] hidden w-580 grid-rows-subgrid border-l @6xl/with-preview:grid",children:s&&e.jsxs(f.Fragment,{children:[e.jsx(S.PreviewHeader,{padding:"p-10",className:"border-b shadow"}),e.jsx("div",{className:"col-[1/-1] row-[2/3] bg-alt",children:e.jsx("iframe",{src:s,className:"mx-auto h-full w-[432px]",ref:i=>a((i==null?void 0:i.contentWindow)??null)})})]})})}function ct(){var i,n;const{data:a}=D(),s=H({defaultValues:{client:{lc:{trusted_domains:((i=a==null?void 0:a.client.lc)==null?void 0:i.trusted_domains)??"",enforce_hmac:((n=a==null?void 0:a.client.lc)==null?void 0:n.enforce_hmac)??!1}}}});return e.jsxs(S.Form,{form:s,children:[e.jsx(u,{name:"client.lc.trusted_domains",label:e.jsx(t,{message:"Trusted domains"}),inputElementType:"textarea",rows:4,description:e.jsx(t,{message:"List your trusted domains and subdomains, separated by commas. To mark all your subdomains as trusted, use an asterisk as a placeholder like this: *.example.com. If you leave this field blank, your chat widget can be added to any domain."})}),e.jsxs("div",{className:"mt-24 border-t pt-24",children:[e.jsx(j,{name:"client.lc.enforce_hmac",description:e.jsx(t,{message:"When identifiying logged in users in widget, always verify identity using secret key.",values:{a:o=>e.jsx(I,{className:"underline",to:"https://support.vebto.com/hc/articles/42/71/239/identifying-logged-in-users-in-livechat-widget",target:"_blank",children:o})}}),children:e.jsx(t,{message:"Enforce identity verification"})}),e.jsxs("div",{className:"mb-24 mt-12 flex flex-col gap-8 text-sm",children:[e.jsx($,{size:"sm",icon:e.jsx(he,{}),link:"https://support.vebto.com/hc/articles/42/71/239/identifying-logged-in-users-in-livechat-widget",children:e.jsx(t,{message:"Identifying logged in users"})}),e.jsx($,{size:"sm",icon:e.jsx(ke,{}),link:"https://support.vebto.com/hc/articles/42/71/238/enforcing-identity-verification-in-livechat-widget",children:e.jsx(t,{message:"Enforce identity verifications"})})]}),e.jsx(lt,{})]})]})}function lt(){const a=D(),[s,i]=Y(a.data.server.widget_hmac_secret??"");return e.jsx(F,{variant:"outline",onClick:()=>i(),children:s?e.jsx(t,{message:"Copied key to clipboard!"}):e.jsx(t,{message:"Copy secret key"})})}function mt(){return e.jsx(Se,{title:"Connect in Real-Time with Live Chat",description:"Don't wait for an email. Add Live Chat to talk with visitors in real-time, solve their problems instantly, and capture more leads. Use page tracking and automated campaigns to proactively engage and boost conversions.",icon:e.jsx(Ce,{size:"lg"}),getModuleLabel:e.jsx(t,{message:"Get LiveChat addon"}),moduleName:"livechat"})}export{Xs as Component,mt as NotInstalledCard};
