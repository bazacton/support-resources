import{j as e,T as n,L as c,r as a,b7 as g,B as m,aw as x,aj as p,ax as u,az as r,ak as y,i as A,s as I,t as D,m as P,q as k,k as z,av as f,b3 as C,al as M}from"./client-OfhJa1Pp.js";import{a as o,K as j,b as d,A as N,D as T}from"./documents-knowledge-section-Dx802JWu.js";import{P as R}from"./toggle-preview-button-xp_UTzfM.js";import{A as W}from"./ai-agent-page-header-BnoGBePt.js";import{u as K,a as _}from"./use-uningest-articles-hHZAykC4.js";import{L as F}from"./library-icon-CHCHM-UW.js";import{A as w}from"./Article-Daay8e29.js";import{C as h}from"./UploadFile-CpvhTaSF.js";import{M as b}from"./MoreVert-Ci70_mZh.js";import{u as L,a as E}from"./use-ingest-snippets-BU6EPthB.js";import{A as O}from"./Add-CN0r1QLK.js";import{g as U,A as V,b as $}from"./main-CqFMqK8-.js";import{D as q}from"./Delete-BhyMZiPM.js";import{P as v}from"./Public-PQskOobw.js";import{S as B}from"./Sync-6-pU802x.js";import{C as Q}from"./confirmation-dialog-BIOq1A-h.js";import{I as H,u as Y}from"./use-sync-website-content-DSZmts9m.js";import"./custom-menu-BbwshV9x.js";import"./file-upload-provider-DTPBUrkd.js";import"./uploaded-file-DN6fXT4v.js";import"./pretty-bytes-bO14ePu9.js";import"./with-selector-CDgEpx5P.js";import"./file-type-icon-Dok_AF4H.js";import"./shallow-BSWIanyL.js";import"./select-Dsco87dL.js";import"./combobox-end-adornment-CaH5Sr_u.js";import"./use-droppable-DqkAoZym.js";import"./open-upload-window-CSDcieK1.js";import"./index.module-DxgU4A3H.js";import"./PriorityHigh-C-SfNUlB.js";import"./knowledge-preview-layout-BcsQlixa.js";import"./Visibility-BkaRhH0o.js";import"./widget-flags-DGIUgINI.js";import"./use-widget-bootstrap-data-BlKRRco5.js";import"./datatable-page-with-header-layout-B1YkbSHJ.js";import"./use-toggle-dashboard-left-sidebar-CnzMOFB9.js";import"./toggle-left-sidebar-icon-Dq5ZwqwZ.js";import"./RestartAlt-BBLLDvr_.js";import"./use-is-module-installed-FCoToztC.js";import"./dashboard-icons-CHop3mns.js";import"./messages-square-icon-CTmom_u4.js";import"./Home--R_oEr6a.js";import"./SupervisorAccount-k9OnPB-d.js";import"./admin-config-tfY5n3F7.js";import"./Translate-Cs-ut2nW.js";import"./TextFields-8TfbEP0O.js";import"./use-url-backed-tabs-D_W8N2tz.js";import"./tabs-BfUlcoJh.js";import"./book-open-Cbdc52Ur.js";import"./accordtion-animation-BGCK95Hj.js";import"./radio-Db_caP9D.js";import"./radio-group-DQLhD511.js";function G(){const{data:s}=o();return e.jsxs(j,{icon:e.jsx(F,{size:"md"}),title:e.jsx(c,{to:"../knowledge/articles",className:"hover:underline",children:e.jsx(n,{message:"Articles"})}),description:e.jsx(n,{message:"Use content from the articles in your help center"}),action:e.jsx(J,{}),children:[s.articles.items.map(t=>e.jsx(Z,{article:t},t.id)),e.jsx(X,{})]})}function J(){const{data:s}=o(),t=K(),i=_(),l=t.isPending||i.isPending||(s==null?void 0:s.articles.ingesting);return e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx(m,{elementType:c,to:"../knowledge/articles",size:"xs",variant:"outline",children:e.jsx(n,{message:"Manage articles"})}),e.jsxs(x,{children:[e.jsx(p,{size:"xs",variant:"outline",disabled:l,children:e.jsx(b,{})}),e.jsxs(u,{children:[e.jsx(r,{value:"enable",onSelected:()=>t.mutate({all:!0}),children:e.jsx(n,{message:"Enable all articles for AI agent"})}),e.jsx(r,{value:"disable",onSelected:()=>i.mutate({all:!0}),children:e.jsx(n,{message:"Disable all articles for AI agent"})})]})]})]})}function X(){const{data:s}=o();return s!=null&&s.articles.more.count?e.jsx(d,{scanPending:s.articles.more.ingesting,to:"../knowledge/articles",name:e.jsx(n,{message:"And :count more articles",values:{count:s.articles.more.count}}),icon:e.jsx(h,{size:"sm"})}):null}function Z({article:s}){return e.jsx(d,{name:s.title,to:`../knowledge/articles/${s.id}/edit`,icon:e.jsx(w,{}),scanPending:s.scan_pending,description:e.jsx(a.Fragment,{children:s.scan_pending?e.jsx(n,{message:"Scanning..."}):e.jsx(n,{message:"Updated: :date",values:{date:e.jsx(g,{date:s.updated_at})}})})})}const ee=a.forwardRef((s,t)=>e.jsxs(y,{...s,ref:t,children:[e.jsx("rect",{width:"20",height:"20",x:"2",y:"2",rx:"2"}),e.jsx("circle",{cx:"8",cy:"8",r:"2"}),e.jsx("path",{d:"M9.414 9.414 12 12"}),e.jsx("path",{d:"M14.8 14.8 18 18"}),e.jsx("circle",{cx:"8",cy:"16",r:"2"}),e.jsx("path",{d:"m18 6-8.586 8.586"})]}));function se(){const{data:s}=o();return e.jsxs(j,{icon:e.jsx(ee,{size:"md"}),title:e.jsx(c,{to:"../knowledge/snippets",className:"hover:underline",children:e.jsx(n,{message:"Snippets"})}),description:e.jsx(n,{message:"Add custom FAQs, answers or other snippets."}),action:e.jsx("div",{children:e.jsx(ne,{})}),children:[s==null?void 0:s.snippets.items.map(t=>e.jsx(ie,{snippet:t},t.id)),e.jsx(te,{})]})}function ne(){const{data:s}=o(),t=L(),i=E(),l=t.isPending||i.isPending||(s==null?void 0:s.snippets.ingesting);return e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx(m,{elementType:c,to:"../knowledge/snippets",size:"xs",variant:"outline",children:e.jsx(n,{message:"Manage snippets"})}),e.jsxs(x,{children:[e.jsx(p,{size:"xs",variant:"outline",disabled:l,children:e.jsx(b,{})}),e.jsxs(u,{children:[e.jsx(r,{value:"enable",onSelected:()=>t.mutate({all:!0}),children:e.jsx(n,{message:"Enable all snippets for AI agent"})}),e.jsx(r,{value:"disable",onSelected:()=>i.mutate({all:!0}),children:e.jsx(n,{message:"Disable all snippets for AI agent"})})]})]})]})}function te(){const{data:s}=o();return s!=null&&s.snippets.more.count?e.jsx(d,{scanPending:s.snippets.more.ingesting,to:"../knowledge/snippets",name:e.jsx(n,{message:"And :count more snippets",values:{count:s.snippets.more.count}}),icon:e.jsx(h,{size:"sm"})}):null}function ie({snippet:s}){return e.jsx(d,{name:s.title,to:`../knowledge/snippets/${s.id}/edit`,icon:e.jsx(w,{}),scanPending:s.scan_pending,description:e.jsx(a.Fragment,{children:s.scan_pending?e.jsx(n,{message:"Scanning..."}):e.jsx(n,{message:"Updated: :date",values:{date:e.jsx(g,{date:s.updated_at})}})})})}function oe(){return A({mutationFn:async({websiteId:s})=>z.delete(`lc/ai-agent/websites/${s}`),onSuccess:()=>{D(P("Website deleted")),k.invalidateQueries({queryKey:U.knowledge.invalidateKey})},onError:s=>I(s)})}function ae(){const{data:s}=o();return e.jsxs(j,{icon:e.jsx(v,{size:"md"}),title:e.jsx(c,{to:"../knowledge/websites",className:"hover:underline",children:e.jsx(n,{message:"Websites"})}),description:e.jsx(n,{message:"Sync content from a public website"}),action:e.jsxs(e.Fragment,{children:[e.jsxs(f,{type:"modal",children:[e.jsx(m,{startIcon:e.jsx(O,{}),variant:"outline",size:"xs",children:e.jsx(n,{message:"Add website"})}),e.jsx(H,{})]}),e.jsx(p,{size:"xs",variant:"outline",className:"ml-6",elementType:c,to:"../knowledge/websites",children:e.jsx(N,{})})]}),children:[s==null?void 0:s.websites.items.map(t=>e.jsx(ce,{website:t},t.id)),e.jsx(re,{})]})}function re(){const{data:s}=o();if(!(s!=null&&s.websites.more.count))return null;const t="../knowledge/websites";return e.jsx(d,{scanPending:s.websites.more.ingesting,to:t,name:e.jsx(n,{message:"And :count more websites",values:{count:s.websites.more.count}}),icon:e.jsx(h,{size:"sm"}),actions:e.jsx(m,{variant:"outline",size:"xs",className:"min-w-96",elementType:c,to:t,children:e.jsx(n,{message:"View all"})})})}function ce({website:s}){return e.jsx(d,{name:s.url,icon:e.jsx(v,{}),scanPending:s.scan_pending,description:e.jsx(a.Fragment,{children:s.scan_pending?e.jsx(n,{message:"Scanning..."}):e.jsx(n,{message:"Last synced: :date",values:{date:e.jsx(g,{date:s.updated_at})}})}),to:`../knowledge/websites/${s.id}/pages`,actions:e.jsx(le,{website:s})})}function le({website:s}){const t=Y(),[i,l]=a.useState(!1),S=C();return e.jsxs(a.Fragment,{children:[e.jsxs(x,{children:[e.jsx(m,{variant:"outline",size:"xs",endIcon:e.jsx(V,{}),children:e.jsx(n,{message:"Manage"})}),e.jsxs(u,{children:[e.jsx(r,{value:"resync",startIcon:e.jsx(B,{size:"sm"}),isDisabled:t.isPending||s.scan_pending,onSelected:()=>t.mutate({websiteId:s.id}),children:e.jsx(n,{message:"Re-sync"})}),e.jsx(r,{value:"view",startIcon:e.jsx($,{size:"sm"}),onSelected:()=>{S(`../knowledge/websites/${s.id}/pages`)},children:e.jsx(n,{message:"View pages"})}),e.jsx(r,{value:"delete",startIcon:e.jsx(q,{size:"sm"}),className:"text-danger",onSelected:()=>l(!0),children:e.jsx(n,{message:"Delete website"})})]})]}),i&&e.jsx(f,{type:"modal",isOpen:i,onOpenChange:l,children:e.jsx(de,{websiteId:s.id})})]})}function de({websiteId:s}){const t=oe(),{close:i}=M();return e.jsx(Q,{isLoading:t.isPending,isDanger:!0,title:e.jsx(n,{message:"Remove website"}),body:e.jsx(n,{message:"Are you sure you want to delete this website? This action cannot be undone."}),confirm:e.jsx(n,{message:"Delete"}),onConfirm:()=>{t.mutate({websiteId:s},{onSuccess:()=>i()})}})}function ls(){const{data:s}=o(),[t,i]=a.useState(!1);return e.jsxs(a.Fragment,{children:[e.jsxs("div",{className:"dashboard-grid-content dashboard-rounded-panel flex h-full flex-col",children:[e.jsx(W,{previewVisible:t,onTogglePreview:()=>i(!t)}),e.jsxs("div",{className:"flex-auto overflow-y-auto p-24",children:[s.ingesting&&e.jsx("div",{className:"mb-24 rounded-panel bg-[#feecaf] p-12 text-center text-sm font-medium dark:text-on-primary",children:e.jsx(n,{message:"Your content is currently being ingested. You will be notified once the ingestion is complete. In the meantime, AI agent may not have your latest content."})}),e.jsxs("div",{className:"space-y-24",children:[e.jsx(ae,{}),e.jsx(G,{}),e.jsx(T,{}),e.jsx(se,{})]})]})]}),t&&e.jsx(R,{onClose:()=>i(!1)})]})}export{ls as Component};
