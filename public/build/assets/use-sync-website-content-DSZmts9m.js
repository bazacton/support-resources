import{al as h,r as b,d as v,j as e,am as S,an as C,T as s,ap as w,aP as A,F as r,bB as F,aK as I,ag as D,C as q,t as l,m as d,aq as E,B as c,i as m,s as u,q as p,k as g,D as T}from"./client-OfhJa1Pp.js";import{g as x}from"./main-CqFMqK8-.js";import{u as W}from"./custom-menu-BbwshV9x.js";import{A as K}from"./accordtion-animation-BGCK95Hj.js";import{F as o}from"./radio-Db_caP9D.js";import{F as R}from"./radio-group-DQLhD511.js";function H(){const{formId:a,close:t}=h(),n=z(),[i,f]=b.useState(!1),j=v({defaultValues:{scanType:"nested",scrapeConfig:{contentCssSelector:""}}});return e.jsxs(S,{size:"lg",children:[e.jsx(C,{showDivider:!0,children:e.jsx(s,{message:"Add website"})}),e.jsx(w,{children:e.jsxs(A,{form:j,id:a,onSubmit:y=>{n.mutate(y,{onSuccess:()=>{l(d("Website queued for ingestion")),t()}})},children:[e.jsx(r,{name:"url",autoFocus:!0,label:e.jsx(s,{message:"Enter the URL of the site you want to sync"}),placeholder:"https://myhelpcenter.com",type:"url",description:e.jsx(s,{message:"Only publicly accessible URLs are supported."})}),e.jsxs(R,{name:"scanType",size:"sm",orientation:"vertical",className:"mt-24",children:[e.jsx(o,{value:"nested",children:e.jsx(s,{message:"Scan only child pages of specified url."})}),e.jsx(o,{value:"full",children:e.jsx(s,{message:"Scan all pages of specified domain."})}),e.jsx(o,{value:"single",children:e.jsx(s,{message:"Scan only specified url"})})]}),e.jsxs(F,{onClick:()=>f(!i),className:"mt-16 gap-4 font-semibold",children:[e.jsx(s,{message:"Advanced options"}),i?e.jsx(D,{size:"sm"}):e.jsx(I,{size:"sm"})]}),e.jsx(q,{initial:!1,children:e.jsx(k,{isExpanded:i})})]})}),e.jsxs(E,{dividerTop:!0,children:[e.jsx(c,{onClick:()=>t(),children:e.jsx(s,{message:"Cancel"})}),e.jsx(c,{type:"submit",form:a,variant:"flat",color:"primary",disabled:n.isPending,children:e.jsx(s,{message:"Sync"})})]})]})}function k({isExpanded:a}){return e.jsxs(T.div,{className:"pt-16",variants:K.variants,transition:{type:"tween",duration:.1},initial:!1,animate:a?"open":"closed",children:[e.jsx(r,{name:"scrapeConfig.contentCssSelector",label:e.jsx(s,{message:"Content CSS selector"}),placeholder:".main-content",size:"sm",className:"mb-16",description:e.jsx(s,{message:"When specified, only content inside this selector will be extracted. Leave empty to extract content from the entire page. Must be a valid CSS selector as accepted by the document.querySelectorAll() function."})}),e.jsx(r,{name:"scrapeConfig.cssSelectorsToExclude",label:e.jsx(s,{message:"CSS selectors to exclude"}),placeholder:"footer, navbar, .sidebar",size:"sm",description:e.jsx(s,{message:"Add a list of CSS selectors you want to ignore when scraping content. We already exclude some elements like navigation, scripts, footer, inline images etc. "})})]})}function z(){const{aiAgentId:a}=W(["aiAgentId"]);return m({mutationFn:t=>g.post("lc/ai-agent/ingest/website",{...t,aiAgentId:a}).then(n=>n.data),onSuccess:()=>{p.invalidateQueries({queryKey:x.knowledge.invalidateKey})},onError:t=>u(t)})}function M(){return m({mutationFn:async({websiteId:a})=>g.post(`lc/ai-agent/websites/${a}/sync`),onSuccess:()=>(l(d("Website sync started")),p.invalidateQueries({queryKey:x.knowledge.invalidateKey})),onError:a=>u(a)})}export{H as I,M as u};
