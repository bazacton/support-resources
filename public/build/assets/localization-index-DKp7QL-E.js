import{M as k,i as h,t as f,m as u,k as y,ae as b,al as p,d as D,I as S,j as e,am as w,an as v,T as s,ap as z,aP as F,F as T,az as d,aq as L,B as c,r as A,aZ as U,s as E,q as H,av as j,H as N,a_ as B,aj as C,L as P,aw as Q,ax as K,bF as R}from"./client-OfhJa1Pp.js";import{A as V}from"./admin-config-tfY5n3F7.js";import{c as x}from"./main-CqFMqK8-.js";import{D as W}from"./settings-links-D22SAe6v.js";import{u as $,a as G}from"./update-localization-Bkh-O0b4.js";import{G as _}from"./global-loading-progress-CKXIm6JS.js";import{D as O}from"./data-table-header-CeAVoFvI.js";import{D as Z}from"./data-table-pagination-footer-CEEx1VtI.js";import{u as J}from"./use-datatable-search-params-CQGreY35.js";import{a as X,D as Y,b as ee,c as ae}from"./datatable-page-with-header-layout-B1YkbSHJ.js";import{u as se}from"./use-datatable-query-BQ-GXlzU.js";import{T as te}from"./table-BifRiqkr.js";import{F as oe}from"./file-upload-provider-DTPBUrkd.js";import{M as ie}from"./MoreVert-Ci70_mZh.js";import{T as re}from"./Translate-Cs-ut2nW.js";import{C as ne}from"./confirmation-dialog-BIOq1A-h.js";import{d as le}from"./download-file-from-url-hJ3EUwXO.js";import{F as me}from"./file-input-config-DrcTpI3-.js";import{o as de}from"./open-upload-window-CSDcieK1.js";import{D as ce}from"./data-table-add-item-button-2jwTYQ5G.js";import{D as ue}from"./data-table-emty-state-message-DLsG3g03.js";import{F as I}from"./select-Dsco87dL.js";import{o as ge}from"./custom-menu-BbwshV9x.js";import"./dashboard-icons-CHop3mns.js";import"./library-icon-CHCHM-UW.js";import"./messages-square-icon-CTmom_u4.js";import"./Delete-BhyMZiPM.js";import"./Home--R_oEr6a.js";import"./SupervisorAccount-k9OnPB-d.js";import"./TextFields-8TfbEP0O.js";import"./external-link-DbBk1ItZ.js";import"./book-open-Cbdc52Ur.js";import"./FilterAlt-CXibH0wr.js";import"./select-filter-panel-C_zo36WK.js";import"./form-chip-field-sH5S7-lx.js";import"./chip-list-CkGaRoaT.js";import"./filter-operator-names-BZog1mvA.js";import"./normalized-model-field-COxh0lBC.js";import"./Edit-JNj6SFDx.js";import"./skeleton-Cp2m1Uyc.js";import"./accordion-DWEV-mKU.js";import"./accordtion-animation-BGCK95Hj.js";import"./checkbox-C4s6ROxp.js";import"./CheckBoxOutlineBlank-DQZJM1Yc.js";import"./use-toggle-dashboard-left-sidebar-CnzMOFB9.js";import"./toggle-left-sidebar-icon-Dq5ZwqwZ.js";import"./ArrowDownward-mN9PlQJw.js";import"./useEffectEvent-DQn3o5L0.js";import"./is-ctrl-key-pressed-BWsUhNJl.js";import"./useGlobalListeners-CeWFSHKo.js";import"./uploaded-file-DN6fXT4v.js";import"./pretty-bytes-bO14ePu9.js";import"./with-selector-CDgEpx5P.js";import"./Add-CN0r1QLK.js";import"./combobox-end-adornment-CaH5Sr_u.js";const pe=""+new URL("around-the-world-DwONd8Eq.svg",import.meta.url).href;function xe(a){return y.post("localizations",a).then(o=>o.data)}function je(a){const o=k();return h({mutationFn:t=>xe(t),onSuccess:()=>{f(u("Localization created")),o.invalidateQueries({queryKey:x.localizations.invalidateKey})},onError:t=>ge(t,a)})}function he(){const{trans:a}=b(),{formId:o,close:t}=p(),i=D({defaultValues:{language:"en"}}),r=S(),m=je(i);return e.jsxs(w,{children:[e.jsx(v,{children:e.jsx(s,{message:"Create localization"})}),e.jsx(z,{children:e.jsxs(F,{form:i,id:o,onSubmit:n=>{m.mutate(n,{onSuccess:t})},children:[e.jsx(T,{autoFocus:!0,name:"name",label:e.jsx(s,{message:"Name"}),className:"mb-30",required:!0}),e.jsx(I,{required:!0,name:"language",label:e.jsx(s,{message:"Language"}),selectionMode:"single",showSearchField:!0,searchPlaceholder:a(u("Search languages")),children:r.map(n=>e.jsx(d,{value:n.code,children:n.name},n.code))})]})}),e.jsxs(L,{children:[e.jsx(c,{onClick:t,children:e.jsx(s,{message:"Cancel"})}),e.jsx(c,{variant:"flat",color:"primary",type:"submit",form:o,disabled:m.isPending,children:e.jsx(s,{message:"Save"})})]})]})}function fe({localization:a}){const{trans:o}=b(),{formId:t,close:i}=p(),r=D({defaultValues:{id:a.id,name:a.name,language:a.language}}),m=S(),n=$(r);return e.jsxs(w,{children:[e.jsx(v,{children:e.jsx(s,{message:"Update localization"})}),e.jsx(z,{children:e.jsxs(F,{form:r,id:t,onSubmit:l=>{n.mutate(l,{onSuccess:i})},children:[e.jsx(T,{name:"name",label:e.jsx(s,{message:"Name"}),className:"mb-30",required:!0}),e.jsx(I,{required:!0,name:"language",label:e.jsx(s,{message:"Language"}),selectionMode:"single",showSearchField:!0,searchPlaceholder:o(u("Search languages")),children:m.map(l=>e.jsx(d,{value:l.code,children:l.name},l.code))})]})}),e.jsxs(L,{children:[e.jsx(c,{onClick:i,children:e.jsx(s,{message:"Cancel"})}),e.jsx(c,{variant:"flat",color:"primary",type:"submit",form:t,disabled:n.isPending,children:e.jsx(s,{message:"Save"})})]})]})}const ye=[{key:"name",allowsSorting:!0,sortingKey:"name",visibleInMode:"all",width:"flex-3 min-w-200",header:()=>e.jsx(s,{message:"Name"}),body:a=>a.name},{key:"language",allowsSorting:!0,sortingKey:"language",header:()=>e.jsx(s,{message:"Language code"}),body:a=>a.language},{key:"updatedAt",allowsSorting:!0,width:"w-100",header:()=>e.jsx(s,{message:"Last updated"}),body:a=>e.jsx(N,{date:a.updated_at})},{key:"actions",header:()=>e.jsx(s,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-84 flex-shrink-0",visibleInMode:"all",body:a=>e.jsxs("div",{className:"text-muted",children:[e.jsx(B,{label:e.jsx(s,{message:"Translate"}),children:e.jsx(C,{size:"md",elementType:P,to:`${a.id}/translate`,children:e.jsx(re,{})})}),e.jsx(oe,{children:e.jsx(be,{locale:a})})]})}];function wa(){const[a,o]=A.useState([]),{searchParams:t,sortDescriptor:i,mergeIntoSearchParams:r,setSearchQuery:m,isFiltering:n}=J(U),l=se(x.localizations.index(t)),q=e.jsxs(j,{type:"modal",children:[e.jsx(c,{variant:"flat",color:"danger",children:e.jsx(s,{message:"Delete"})}),e.jsx(De,{selectedIds:a,onDelete:()=>o([])})]}),M=e.jsxs(j,{type:"modal",children:[e.jsx(ce,{children:e.jsx(s,{message:"Add new localization"})}),e.jsx(he,{})]});return e.jsxs(X,{children:[e.jsx(_,{query:l}),e.jsx(Y,{title:e.jsx(s,{message:"Localizations"}),showSidebarToggleButton:!0,rightContent:e.jsx(W,{variant:"button",link:V.pages.translations,size:"xs"})}),e.jsxs(ee,{children:[e.jsx(O,{searchValue:t.query,onSearchChange:m,actions:M,selectedItems:a,selectedActions:q}),e.jsxs(ae,{children:[e.jsx(te,{columns:ye,data:l.items,sortDescriptor:i,onSortChange:r,enableSelection:!0,selectedRows:a,onSelectionChange:o,cellHeight:"h-60"}),l.isEmpty&&e.jsx(ue,{isFiltering:n,image:pe,title:e.jsx(s,{message:"No localizations have been created yet"}),filteringTitle:e.jsx(s,{message:"No matching localizations"})}),e.jsx(Z,{query:l,onPageChange:g=>r({page:g}),onPerPageChange:g=>r({perPage:g})})]})]})]})}function be({locale:a}){const o=G();return e.jsxs(Q,{children:[e.jsx(C,{disabled:o.isPending,children:e.jsx(ie,{})}),e.jsxs(K,{children:[e.jsx(d,{value:"translate",elementType:P,to:`${a.id}/translate`,children:e.jsx(s,{message:"Translate"})}),e.jsx(d,{value:"rename",onSelected:()=>R(fe,{localization:a}),children:e.jsx(s,{message:"Rename"})}),e.jsx(d,{value:"download",onSelected:()=>le(`api/v1/localizations/${a.id}/download`),children:e.jsx(s,{message:"Download"})}),e.jsx(d,{value:"upload",onSelected:async()=>{const t=await de({types:[me.json]});t.length==1&&o.mutate({localeId:a.id,file:t[0]})},children:e.jsx(s,{message:"Upload"})})]})]})}function De({selectedIds:a,onDelete:o}){const{close:t}=p(),i=h({mutationFn:()=>y.delete(`localizations/${a.join(",")}`),onSuccess:async()=>{await H.invalidateQueries({queryKey:x.localizations.invalidateKey}),f(u("Localizations deleted")),o(),t()},onError:r=>E(r)});return e.jsx(ne,{isDanger:!0,isLoading:i.isPending,title:e.jsx(s,{message:"Delete localizations"}),body:e.jsx(s,{message:"Are you sure you want to delete selected localizations?",values:{count:a.length}}),confirm:e.jsx(s,{message:"Delete"}),onConfirm:()=>i.mutate()})}export{wa as Component,De as DeleteLocalizationsDialog};
