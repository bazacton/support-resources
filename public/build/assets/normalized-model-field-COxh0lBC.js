import{Z as L,k as R,f as B,$ as D,j as e,r as I,aA as G,ae as K,a3 as P,p as E,C as Q,az as Z,S as $,m as y,D as b,G as M,a_ as A,aj as _,T as H}from"./client-OfhJa1Pp.js";import{k as J}from"./main-CqFMqK8-.js";import{S as O}from"./select-Dsco87dL.js";import{E as U}from"./Edit-JNj6SFDx.js";import{S as f}from"./skeleton-Cp2m1Uyc.js";function W(s,t,n){return L({queryKey:[s,t],queryFn:()=>X(s,t),...n})}async function X(s,t){return R.get(s,{params:t}).then(n=>n.data)}function Y({label:s,className:t,background:n,value:l,defaultValue:r="",placeholder:a=y("Select item..."),searchPlaceholder:o=y("Find an item..."),onChange:c,description:d,errorMessage:u,invalid:j,autoFocus:V,queryParams:p,endpoint:g,disabled:v,required:T,size:q}){var w;const x=I.useRef(null),[N,C]=I.useState(""),[h,S]=G(l,r,c),F=J(g,{query:N,...p}),{trans:z}=K(),m=P({size:q,background:n});return h?e.jsxs("div",{className:t,children:[s&&e.jsx("div",{className:m.label,children:s}),e.jsx("div",{className:E(m.input,j&&"border-danger"),children:e.jsx(Q,{initial:!1,mode:"wait",children:e.jsx(ee,{disabled:v,endpoint:g,className:m.input,modelId:h,queryParams:p,onEditClick:()=>{S(""),C(""),requestAnimationFrame(()=>{var i,k;(i=x.current)==null||i.focus(),(k=x.current)==null||k.click()})}})})}),d&&!u&&e.jsx("div",{className:m.description,children:d}),u&&e.jsx("div",{className:m.error,children:u})]}):e.jsx(O,{className:t,showSearchField:!0,invalid:j,errorMessage:u,description:d,color:"white",isAsync:!0,background:n,placeholder:z(a),searchPlaceholder:z(o),label:s,isLoading:F.isFetching,items:(w=F.data)==null?void 0:w.results,inputValue:N,onInputValueChange:C,selectionMode:"single",selectedValue:h,onSelectionChange:S,ref:x,autoFocus:V,disabled:v,required:T,children:i=>e.jsx(Z,{value:i.id,description:i.description,startIcon:e.jsx($,{src:i.image,size:"sm",label:i.name}),children:i.name},i.id)})}function ee({modelId:s,onEditClick:t,endpoint:n,disabled:l,queryParams:r}){const{data:a,isLoading:o}=W(`${n}/${s}`,r);return o||!(a!=null&&a.model)?e.jsx(se,{},"skeleton"):e.jsxs(b.div,{className:E("flex h-full items-center gap-8",l&&"pointer-events-none cursor-not-allowed text-disabled"),...M,children:[e.jsx($,{src:a.model.image,label:a.model.name,size:"sm"}),e.jsx("div",{children:e.jsx(A,{label:a.model.description??a.model.name??"",children:e.jsx("div",{className:"text-sm leading-4",children:a.model.name})})}),e.jsx(A,{label:e.jsx(H,{message:"Change item"}),children:e.jsx(_,{className:"ml-auto text-muted",size:"sm",onClick:t,disabled:l,children:e.jsx(U,{})})})]},"preview")}function se(){return e.jsxs(b.div,{className:"flex h-full items-center gap-8",...M,children:[e.jsx(f,{variant:"rect",size:"w-24 h-24 flex-shrink-0"}),e.jsx(f,{className:"max-w-100 text-xs"}),e.jsx(f,{variant:"icon",size:"w-24 h-24",className:"ml-auto"})]})}function re({name:s,size:t,...n}){const{clearErrors:l}=B(),{field:{onChange:r,value:a=""},fieldState:{invalid:o,error:c}}=D({name:s});return e.jsx(Y,{size:t,value:a,onChange:d=>{r(d),l(s)},invalid:o,errorMessage:c==null?void 0:c.message,...n})}export{re as F,W as u};
