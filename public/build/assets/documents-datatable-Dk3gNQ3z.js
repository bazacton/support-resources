import{r as S,j as e,T as s,b1 as u,b2 as p,m as r,aZ as w,q as y,av as k,B as v,aX as l,L as x,H as T,aj as C,al as P,i as F,s as _,k as I,t as B}from"./client-OfhJa1Pp.js";import{g,h as q,i as A}from"./main-CqFMqK8-.js";import{t as H,S as N}from"./sync-tags-button-CBK7H6fR.js";import{o as z}from"./online-articles-CqWeBVNj.js";import{G as E}from"./global-loading-progress-CKXIm6JS.js";import{D as L}from"./data-table-header-CeAVoFvI.js";import{D as K}from"./data-table-pagination-footer-CEEx1VtI.js";import{u as Q}from"./use-datatable-search-params-CQGreY35.js";import{D as V}from"./data-table-emty-state-message-DLsG3g03.js";import{D as M}from"./datatable-filters-C2DdpqvR.js";import{a as O,D as R,b as $,c as G}from"./datatable-page-with-header-layout-B1YkbSHJ.js";import{u as W}from"./use-datatable-query-BQ-GXlzU.js";import{u as U}from"./custom-menu-BbwshV9x.js";import{T as X}from"./table-BifRiqkr.js";import{B as Y,a as h}from"./breadcrumb-DMWJORWM.js";import{C as Z}from"./chip-list-CkGaRoaT.js";import{V as J}from"./Visibility-BkaRhH0o.js";import{C as ee}from"./confirmation-dialog-BIOq1A-h.js";import"./section-helper-Cq13cJUI.js";import"./form-chip-field-sH5S7-lx.js";import"./FilterAlt-CXibH0wr.js";import"./select-filter-panel-C_zo36WK.js";import"./filter-operator-names-BZog1mvA.js";import"./select-Dsco87dL.js";import"./combobox-end-adornment-CaH5Sr_u.js";import"./normalized-model-field-COxh0lBC.js";import"./Edit-JNj6SFDx.js";import"./skeleton-Cp2m1Uyc.js";import"./accordion-DWEV-mKU.js";import"./accordtion-animation-BGCK95Hj.js";import"./checkbox-C4s6ROxp.js";import"./CheckBoxOutlineBlank-DQZJM1Yc.js";import"./formatted-number-DuD1Sa1W.js";import"./use-toggle-dashboard-left-sidebar-CnzMOFB9.js";import"./toggle-left-sidebar-icon-Dq5ZwqwZ.js";import"./ArrowDownward-mN9PlQJw.js";import"./useEffectEvent-DQn3o5L0.js";import"./is-ctrl-key-pressed-BWsUhNJl.js";import"./useGlobalListeners-CeWFSHKo.js";import"./ChevronRight-T5gg5A4x.js";import"./MoreHoriz-hMMIYAbm.js";const ae=[{key:"name",width:"flex-3 min-w-200",visibleInMode:"all",header:()=>e.jsx(s,{message:"Name"}),body:a=>e.jsxs("div",{className:"flex items-center gap-6",children:[!!a.tags.length&&e.jsx(Z,{size:"xs",children:a.tags.slice(0,3).map(t=>e.jsx(l,{children:t},t))}),e.jsx(x,{to:a.scan_pending?"":`../knowledge/documents/${a.id}`,className:"block hover:underline",children:a.file_entry.name})]})},{key:"fully_scanned",allowsSorting:!0,width:"w-144 flex-shrink-0",header:()=>e.jsx(s,{message:"Status"}),body:a=>a.scan_pending?e.jsx(l,{color:"danger",size:"xs",children:e.jsx(s,{message:"Scan pending"})}):a.scan_failed?e.jsx(l,{color:"danger",size:"xs",children:e.jsx(s,{message:"Scan failed"})}):e.jsx(l,{color:"positive",size:"xs",children:e.jsx(s,{message:"Scanned"})})},{key:"type",allowsSorting:!0,width:"w-144 flex-shrink-0",header:()=>e.jsx(s,{message:"Type"}),body:a=>a.file_entry.type},{key:"created_at",allowsSorting:!0,width:"w-144",header:()=>e.jsx(s,{message:"Scan date"}),body:a=>e.jsx("time",{children:e.jsx(T,{date:a.created_at})})},{key:"actions",header:()=>e.jsx(s,{message:"Actions"}),width:"w-42 flex-shrink-0",hideHeader:!0,align:"end",visibleInMode:"all",body:a=>e.jsx("div",{className:"text-muted",children:e.jsx(C,{size:"md",elementType:x,to:`../knowledge/documents/${a.id}`,disabled:a.scan_pending||a.scan_failed,children:e.jsx(J,{})})})}],j=[{key:"scan_pending",label:r("Fully scanned"),defaultOperator:p.eq,control:{type:u.Select,defaultValue:"0",options:[{value:!0,label:"No",key:"1"},{value:!1,label:"Yes",key:"0"}]}},{key:"scan_failed",label:r("Scan status"),defaultOperator:p.eq,control:{type:u.Select,defaultValue:"0",options:[{value:!0,label:r("Failed"),key:"0"},{value:!1,label:r("Succeded"),key:"1"}]}},H(),A({label:r("Upload date")})];function Oe(){const{aiAgentId:a}=U(["aiAgentId"]),[t,i]=S.useState([]),{searchParams:o,sortDescriptor:m,mergeIntoSearchParams:d,setSearchQuery:f,isFiltering:b}=Q(w),n=W(g.documents.index(a,o)),D=e.jsxs(e.Fragment,{children:[e.jsx(N,{taggableType:"aiAgentDocument",selectedIds:t,onTagsSynced:()=>{y.invalidateQueries({queryKey:g.documents.invalidateKey}),i([])}}),e.jsxs(k,{type:"modal",children:[e.jsx(v,{variant:"flat",color:"danger",children:e.jsx(s,{message:"Delete"})}),e.jsx(se,{selectedIds:t,onDelete:()=>i([])})]})]});return e.jsxs(O,{children:[e.jsx(E,{query:n}),e.jsx(q,{children:e.jsx(s,{message:"Documents"})}),e.jsx(R,{showSidebarToggleButton:!0,children:e.jsxs(Y,{size:"xl",children:[e.jsx(h,{to:"../knowledge",children:e.jsx(s,{message:"Knowledge"})}),e.jsx(h,{to:"../knowledge/documents",children:e.jsx(s,{message:"Documents"})})]})}),e.jsxs($,{children:[e.jsx(L,{searchValue:o.query,onSearchChange:f,filters:j,selectedItems:t,selectedActions:D}),e.jsx(M,{filters:j}),e.jsxs(G,{children:[e.jsx(X,{columns:ae,data:n.items,sortDescriptor:m,onSortChange:d,cellHeight:"h-64",selectedRows:t,onSelectionChange:i}),n.isEmpty?e.jsx(V,{isFiltering:b,image:z,title:e.jsx(s,{message:"No documents have been scanned yet"}),filteringTitle:e.jsx(s,{message:"No matching documents"})}):null,e.jsx(K,{query:n,onPageChange:c=>d({page:c}),onPerPageChange:c=>d({perPage:c})})]})]})]})}function se({selectedIds:a,onDelete:t}){const{close:i}=P(),o=F({mutationFn:()=>I.delete(`lc/ai-agent/documents/${a.join(",")}`),onSuccess:async()=>{await y.invalidateQueries({queryKey:g.knowledge.invalidateKey}),B(r("Documents deleted")),t(),i()},onError:m=>_(m)});return e.jsx(ee,{isDanger:!0,isLoading:o.isPending,title:e.jsx(s,{message:"Delete documents"}),body:e.jsx(s,{message:"Are you sure you want to delete selected documents?",values:{count:a.length}}),confirm:e.jsx(s,{message:"Delete"}),onConfirm:()=>o.mutate()})}export{Oe as Component};
