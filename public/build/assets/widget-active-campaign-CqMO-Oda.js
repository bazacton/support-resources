import{h as g,r as d,t as l,u as f,bg as u,j as m,bL as h,D as C,bM as b}from"./client-OfhJa1Pp.js";import{C as x}from"./campaign-renderer-DoUgJ45b.js";import{l as W,w as p,u as v,a as S,b as w}from"./widget-entry-CxNqRu8v.js";import"./css-props-from-bg-config-CgypBlFP.js";import"./use-compact-agents-VrJm5fj6.js";import"./helpdesk-channel-CQKSbeKg.js";import"./online-status-circle-QXiKm4xe.js";import"./HourglassEmpty-BpvqVftp.js";import"./agent-avatar-CN8Be1Dj.js";import"./Send-CHhhtcWL.js";import"./widget-flags-DGIUgINI.js";import"./use-widget-bootstrap-data-BlKRRco5.js";import"./feed-attachments-54xris-A.js";import"./animating-messages-DuT2CR0j.js";import"./file-thumbnail-D9-TxWtC.js";import"./file-type-icon-Dok_AF4H.js";import"./formatted-bytes-CmuQhzYn.js";import"./pretty-bytes-bO14ePu9.js";import"./AttachFile-DK1KiGUi.js";import"./reverse-conversation-messages-abBI68AY.js";import"./infinite-scroll-sentinel-sZcqy_uF.js";import"./isScrollable-BSEN4xi5.js";import"./customer-avatar-DNefi2od.js";import"./file-upload-provider-DTPBUrkd.js";import"./uploaded-file-DN6fXT4v.js";import"./with-selector-CDgEpx5P.js";import"./attribute-renderer-BAh3glGI.js";import"./ThumbDown-CmU9VZYm.js";import"./ThumbUp-B7v5mSGQ.js";import"./attribute-input-renderer-BJ7XGaGf.js";import"./button-group-Cs5CuUiC.js";import"./date-picker-CUWok1XJ.js";import"./radio-Db_caP9D.js";import"./radio-group-DQLhD511.js";import"./select-Dsco87dL.js";import"./combobox-end-adornment-CaH5Sr_u.js";import"./checkbox-C4s6ROxp.js";import"./CheckBoxOutlineBlank-DQZJM1Yc.js";import"./get-default-values-for-form-with-attributes-htMbgWW2.js";import"./HelpOutline-BWHaeyMp.js";import"./stream-BHqpFGMu.js";import"./useMutationState-V1q6F41O.js";import"./formatted-message-body-WNPn2fpJ.js";import"./useInfiniteQuery-Dr3ouRcV.js";import"./infiniteQueryObserver-dCGK3uny.js";import"./emoji-picker-button-CQGpXygB.js";import"./tiptap-editor-context-BAgvnYfz.js";import"./check-circle-filled-DBwRd3aX.js";import"./Add-CN0r1QLK.js";import"./open-upload-window-CSDcieK1.js";import"./play-conversation-sound-DRUgHrdP.js";import"./websocket-updates-notifier-CaEDKM_o.js";import"./ChatBubbleOutline-BMaPdsVG.js";import"./index.module-DxgU4A3H.js";function P(){const t=g(),{sendMessageHandler:e,isPending:r}=A();return{handleCampaignAction:d.useCallback((s,a,i,o)=>{W(s,!0),i==="dismiss"&&p().hideCampaign(),o&&(i==="openUrl"?window.open(o,"_blank"):i==="copyToClipboard"?(navigator.clipboard.writeText(o),l("Copied to clipboard!")):i==="openEmbed"?(t("/embed",{state:{embedUrl:o}}),p().setWidgetState("open")):i==="sendMessage"&&e(o))},[e,t]),isPending:r}}function A(){var a,i;const t=f(),e=((i=(a=t.chatWidget)==null?void 0:a.forms)==null?void 0:i.preChat)&&!t.chatWidget.forms.preChat.disabled,r=g(),n=v();return{sendMessageHandler:d.useCallback(o=>{e?(r("/conversations/new",{replace:!0,state:{messageBody:o}}),p().setWidgetState("open")):n.mutate({message:{uuid:u(),body:o,attachments:[]}},{onSuccess:()=>{p().setWidgetState("open")}})},[n,r,e]),isPending:n.isPending}}function Mt(){const t=S(e=>e.activeCampaign);return t?m.jsx(j,{campaign:t}):null}function j({campaign:t}){var s;const{paddingSide:e}=w(),{isPending:r,handleCampaignAction:n}=P();return d.useEffect(()=>{var i,o;(i=t.appearance)!=null&&i.fontConfig&&h([(o=t.appearance)==null?void 0:o.fontConfig],{id:"campaign-fonts"})},[(s=t.appearance)==null?void 0:s.fontConfig]),m.jsx(C.div,{...b,style:{width:`${E(t)+e*2}px`,height:`${t.height+28}px`,paddingLeft:`${e}px`,paddingRight:`${e}px`},children:m.jsx(x,{onClose:()=>p().hideCampaign(),campaign:t,actionIsPending:r,onAction:(a,i,o,c)=>n(t,i,o,c)})})}function E(t){var e;switch(((e=t.appearance)==null?void 0:e.size)??"sm"){case"md":return 300;case"lg":return 375;default:return 240}}export{Mt as default};
