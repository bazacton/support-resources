import{R as I,V as M,bV as B,a as z,cw as T,cx as x,cy as O,x as D,o as S,k as N,cz as R,j as A,p as k,cA as Q,s as L,t as V,r as P,bX as J,u as U,b4 as X,T as G,b6 as H,ba as W,a_ as Y}from"./client-OfhJa1Pp.js";function fe(e,i){return I({...e,enabled:!0,suspense:!0,throwOnError:B,placeholderData:void 0},M,i)}const pe=e=>{const i=z();for(const c of e)if(!i[c])throw new Error(`This component should not be rendered on a route which does not have the ${c} parameter`);return i},Z=(e,i)=>T({page:e.page||"1",perPage:e.perPage||"15",orderBy:e.orderBy||"",orderDir:e.orderDir||"",query:e.query||"",filters:e.filters||"",with:e.with||"",withCount:e.withCount||"",paginate:e.paginate||"preferLengthAware",aiAgentId:i||""}),b=e=>{var i;return T({perPage:e.perPage||"",query:e.query||"",categoryIds:((i=e.categoryIds)==null?void 0:i.join(","))||""})},j=e=>T({page:e.page||"1",orderBy:e.orderBy||"",orderDir:e.orderDir||"",query:e.query||"",statusId:e.statusId||""}),ye={articles:{invalidateKey:["articles"],index:(e,i)=>{const c=Z(e,i);return x({queryKey:["articles",c],placeholderData:S,queryFn:({signal:o})=>O("hc/articles",c,o)})},getForArticlePage:e=>_(e,"articlePage"),getForUpdateArticlePage:e=>_(e,"updateArticle"),search:(e,i)=>{const c=b(e);return x({queryKey:["articles","search",c],placeholderData:S,enabled:!!c.query,queryFn:async({signal:o})=>{const l=await O("search/articles",c,o);return i==null||i(l),l},initialData:()=>{var l;const o=(l=D().loaders)==null?void 0:l.searchArticles;if((o==null?void 0:o.query)===e.query)return o}})}},categories:{invalidateKey:["articles"],landingPageData:()=>{var e;return x({queryKey:["articles","landing-page"],queryFn:()=>O("hc"),initialData:(e=D().loaders)==null?void 0:e.hcLandingPage})},get:e=>x({queryKey:["articles","categories",`${e}`],queryFn:()=>O(`hc/categories/${e}`),initialData:()=>{var c,o;const i=(c=D().loaders)==null?void 0:c.categoryPage;if(((o=i==null?void 0:i.category)==null?void 0:o.id)==e)return i}}),normalizedList:()=>x({queryKey:["articles","categories","normalized"],queryFn:()=>O("helpdesk/normalized-models/hc-categories")})},manager:{invalidateKey:["articles"],categories:()=>x({queryKey:["articles","categories","manager"],queryFn:()=>O("hc/manager/categories")}),sections:e=>x({queryKey:["articles","sections","manager",e],queryFn:()=>O(`hc/manager/categories/${e}/sections`)}),articles:e=>x({queryKey:["articles","manager",e],queryFn:()=>O(`hc/manager/sections/${e}/articles`)})},customerConversations:{invalidateKey:["conversations"],index:e=>{const i=j(e);return x({placeholderData:S,queryKey:["conversations","customer","me",i],queryFn:()=>O("helpdesk/customer/tickets",i)})},get:e=>x({queryKey:["conversations","customer","me",e],queryFn:()=>O(`helpdesk/customer/tickets/${e}`)}),newTicketPageData:()=>{const{isInsideSettingsPreview:e}=R(),i={loadAllAttributes:e?"true":""};return x({queryKey:["customer-new-ticket-page-data",i],staleTime:e?1/0:6e5,queryFn:()=>O("helpdesk/customer-new-ticket-page-config",i)})}}};function _({articleId:e,categoryId:i,sectionId:c},o){return x({queryKey:["articles",e,i,c,o],staleTime:1/0,queryFn:()=>{const l=i&&c?`hc/articles/${i}/${c}/${e}`:`hc/articles/${e}`;return N.get(l,{params:{loader:o}}).then(p=>p.data)},initialData:()=>{var y;const l=(y=D().loaders)==null?void 0:y[o];if(!l)return;const[p,d]="path"in l.article?l.article.path:[];if(l.article.id==e&&(p==null?void 0:p.id)==i&&(d==null?void 0:d.id)==c)return l}})}function he({image:e,title:i,description:c,action:o,className:l,size:p="md",imageHeight:d,imageMargin:y="mb-24"}){const g=ee(p,d);return A.jsxs("div",{className:k("mx-auto w-max max-w-full text-center",l),children:[e&&A.jsx("div",{className:k(g.image,y),children:e}),i&&A.jsx("div",{className:k(g.title,"mb-2 text-main"),children:i}),c&&A.jsx("div",{className:k(g.description,"text-muted"),children:c}),o&&A.jsx("div",{className:"mt-20",children:o})]})}function ee(e,i){switch(e){case"xs":return{image:i||"h-60",title:"text-sm",description:"text-xs"};case"sm":return{image:i||"h-80",title:"text-base",description:"text-sm"};default:return{image:i||"h-128",title:"text-lg",description:"text-base"}}}function de(e,i,c=[],o=!1){const l=(p,d,y)=>{c.includes(p)||p==="captcha_token"||o&&!(p in i.getValues())?V.danger(d):i.setError(p,{message:d},{shouldFocus:y})};if(i&&Q.isAxiosError(e)&&e.response){const p=e.response.data;te(p.errors)?L(e):Object.entries(p.errors||{}).forEach(([d,y],g)=>{typeof y=="string"?l(d,y,g===0):y.forEach((q,u)=>{l(d,q,g===0&&u===0)})})}}function te(e){return!e||Array.isArray(e)&&e.length===0||Object.keys(e).length===0}const ge=P.memo(({src:e,className:i,height:c="h-full"})=>{const o=re(e);return A.jsx("div",{className:k("svg-image-container inline-block bg-no-repeat",c,i),dangerouslySetInnerHTML:o?{__html:o}:void 0})}),F=new Map;function re(e){const[i,c]=P.useState(null);return P.useEffect(()=>{const o=F.get(e);if(o)typeof o=="string"?c(o):o.then(c);else{const l=ne(e);F.set(e,l),l.then(p=>{F.set(e,p),c(p)})}},[e]),i}function ne(e){return fetch(e).then(i=>i.text())}var K,C;function ie(){if(C)return K;C=1;function e(r,t){var n,a;if(typeof t=="function")a=t(r),a!==void 0&&(r=a);else if(Array.isArray(t))for(n=0;n<t.length;n++)a=t[n](r),a!==void 0&&(r=a);return r}function i(r,t){return r[0]==="-"&&Array.isArray(t)&&/^-\d+$/.test(r)?t.length+parseInt(r,10):r}function c(r){return/^\d+$/.test(r)}function o(r){return Object.prototype.toString.call(r)==="[object Object]"}function l(r){return Object(r)===r}function p(r){return Object.keys(r).length===0}var d=["__proto__","prototype","constructor"],y=function(r){return d.indexOf(r)===-1};function g(r,t){r.indexOf("[")>=0&&(r=r.replace(/\[/g,t).replace(/]/g,""));var n=r.split(t),a=n.filter(y);if(a.length!==n.length)throw Error("Refusing to update blacklisted property "+r);return n}var q=Object.prototype.hasOwnProperty;function u(r,t,n,a){if(!(this instanceof u))return new u(r,t,n,a);typeof t>"u"&&(t=!1),typeof n>"u"&&(n=!0),typeof a>"u"&&(a=!0),this.separator=r||".",this.override=t,this.useArray=n,this.useBrackets=a,this.keepArray=!1,this.cleanup=[]}var v=new u(".",!1,!0,!0);function h(r){return function(){return v[r].apply(v,arguments)}}return u.prototype._fill=function(r,t,n,a){var s=r.shift();if(r.length>0){if(t[s]=t[s]||(this.useArray&&c(r[0])?[]:{}),!l(t[s]))if(this.override)t[s]={};else{if(!(l(n)&&p(n)))throw new Error("Trying to redefine `"+s+"` which is a "+typeof t[s]);return}this._fill(r,t[s],n,a)}else{if(!this.override&&l(t[s])&&!p(t[s])){if(!(l(n)&&p(n)))throw new Error("Trying to redefine non-empty obj['"+s+"']");return}t[s]=e(n,a)}},u.prototype.object=function(r,t){var n=this;return Object.keys(r).forEach(function(a){var s=t===void 0?null:t[a],f=g(a,n.separator).join(n.separator);f.indexOf(n.separator)!==-1?(n._fill(f.split(n.separator),r,r[a],s),delete r[a]):r[a]=e(r[a],s)}),r},u.prototype.str=function(r,t,n,a){var s=g(r,this.separator).join(this.separator);return r.indexOf(this.separator)!==-1?this._fill(s.split(this.separator),n,t,a):n[r]=e(t,a),n},u.prototype.pick=function(r,t,n,a){var s,f,w,m,E;for(f=g(r,this.separator),s=0;s<f.length;s++)if(m=i(f[s],t),t&&typeof t=="object"&&m in t){if(s===f.length-1)return n?(w=t[m],a&&Array.isArray(t)?t.splice(m,1):delete t[m],Array.isArray(t)&&(E=f.slice(0,-1).join("."),this.cleanup.indexOf(E)===-1&&this.cleanup.push(E)),w):t[m];t=t[m]}else return;return n&&Array.isArray(t)&&(t=t.filter(function($){return $!==void 0})),t},u.prototype.delete=function(r,t){return this.remove(r,t,!0)},u.prototype.remove=function(r,t,n){var a;if(this.cleanup=[],Array.isArray(r)){for(a=0;a<r.length;a++)this.pick(r[a],t,!0,n);return n||this._cleanup(t),t}else return this.pick(r,t,!0,n)},u.prototype._cleanup=function(r){var t,n,a,s;if(this.cleanup.length){for(n=0;n<this.cleanup.length;n++)a=this.cleanup[n].split("."),s=a.splice(0,-1).join("."),t=s?this.pick(s,r):r,t=t[a[0]].filter(function(f){return f!==void 0}),this.set(this.cleanup[n],t,r);this.cleanup=[]}},u.prototype.del=u.prototype.remove,u.prototype.move=function(r,t,n,a,s){return typeof a=="function"||Array.isArray(a)?this.set(t,e(this.pick(r,n,!0),a),n,s):(s=a,this.set(t,this.pick(r,n,!0),n,s)),n},u.prototype.transfer=function(r,t,n,a,s,f){return typeof s=="function"||Array.isArray(s)?this.set(t,e(this.pick(r,n,!0),s),a,f):(f=s,this.set(t,this.pick(r,n,!0),a,f)),a},u.prototype.copy=function(r,t,n,a,s,f){return typeof s=="function"||Array.isArray(s)?this.set(t,e(JSON.parse(JSON.stringify(this.pick(r,n,!1))),s),a,f):(f=s,this.set(t,this.pick(r,n,!1),a,f)),a},u.prototype.set=function(r,t,n,a){var s,f,w,m;if(typeof t>"u")return n;for(w=g(r,this.separator),s=0;s<w.length;s++){if(m=w[s],s===w.length-1)if(a&&o(t)&&o(n[m]))for(f in t)q.call(t,f)&&(n[m][f]=t[f]);else if(a&&Array.isArray(n[m])&&Array.isArray(t))for(var E=0;E<t.length;E++)n[w[s]].push(t[E]);else n[m]=t;else(!q.call(n,m)||!o(n[m])&&!Array.isArray(n[m]))&&(/^\d+$/.test(w[s+1])?n[m]=[]:n[m]={});n=n[m]}return n},u.prototype.transform=function(r,t,n){return t=t||{},n=n||{},Object.keys(r).forEach((function(a){this.set(r[a],this.pick(a,t),n)}).bind(this)),n},u.prototype.dot=function(r,t,n){t=t||{},n=n||[];var a=Array.isArray(r);return Object.keys(r).forEach((function(s){var f=a&&this.useBrackets?"["+s+"]":s;if(l(r[s])&&(o(r[s])&&!p(r[s])||Array.isArray(r[s])&&!this.keepArray&&r[s].length!==0))if(a&&this.useBrackets){var w=n[n.length-1]||"";return this.dot(r[s],t,n.slice(0,-1).concat(w+f))}else return this.dot(r[s],t,n.concat(f));else a&&this.useBrackets?t[n.join(this.separator).concat("["+s+"]")]=r[s]:t[n.concat(f).join(this.separator)]=r[s]}).bind(this)),t},u.pick=h("pick"),u.move=h("move"),u.transfer=h("transfer"),u.transform=h("transform"),u.copy=h("copy"),u.object=h("object"),u.str=h("str"),u.set=h("set"),u.delete=h("delete"),u.del=u.remove=h("remove"),u.dot=h("dot"),["override","overwrite"].forEach(function(r){Object.defineProperty(u,r,{get:function(){return v.override},set:function(t){v.override=!!t}})}),["useArray","keepArray","useBrackets"].forEach(function(r){Object.defineProperty(u,r,{get:function(){return v[r]},set:function(t){v[r]=t}})}),u._process=e,K=u,K}var se=ie();const ae=J(se);function ce(e){const i=U(),{user:c,hasPermission:o}=X();return P.useMemo(()=>{var d;if(!e)return null;const l=typeof e=="string"?(d=i.menus)==null?void 0:d.find(y=>{var g;return(g=y.positions)==null?void 0:g.includes(e)}):e,p=[];if(l){for(const y of l.items){const g=(y.roles||[]).every(v=>{var h;return(h=c==null?void 0:c.roles)==null?void 0:h.find(r=>r.id===v)}),q=(y.permissions||[]).every(v=>o(v)),u=!y.settings||Object.entries(y.settings).every(([v,h])=>ae.pick(v,i)==h);!y.action||!g||!q||!u||!oe(y,c)||(c!=null&&c.id&&(y.action=y.action.replace(/{currentUser}/g,`${c.id}`)),p.push(y))}l.items=p}return l},[o,i,e,c])}function oe(e,i){var o;if(!e.subscriptionStatus)return!0;const c=!!((o=i==null?void 0:i.subscriptions)!=null&&o.find(l=>l.active));return e.subscriptionStatus==="subscribed"?c:!c}function me({className:e,iconClassName:i,itemClassName:c,gap:o="gap-30",menu:l,orientation:p="horizontal",children:d,matchDescendants:y,onlyShowIcons:g,iconSize:q,unstyled:u=!1,defaultIcons:v}){const h=ce(l);return h?A.jsx("div",{className:k("flex",o,p==="vertical"?"flex-col items-start":"items-center",e),"data-menu-id":h.id,children:h.items.map(r=>{const t={item:r,unstyled:u,onlyShowIcon:g,matchDescendants:y,iconClassName:i,iconSize:q,defaultIcons:v,className:n=>typeof c=="function"?c({...n,item:r}):c};return d?d(r,t):A.jsx(ue,{...t},r.id)})}):null}const ue=P.forwardRef(({item:e,className:i,matchDescendants:c,unstyled:o,onlyShowIcon:l,iconClassName:p,iconSize:d="sm",extraContent:y,position:g="relative",defaultIcons:q,icon:u,...v},h)=>{const r=A.jsx(G,{message:e.label});let t=null;if(u)t=u;else if(e.icon){const f=H(e.icon);t=f&&A.jsx(f,{size:d,className:p})}else if(q){const f=q[e.action.split("?")[0]];t=f&&A.jsx(f,{size:d,className:p})}t&&l&&r&&(t=A.jsx(Y,{label:r,placement:"right",children:t}));const n=A.jsxs(P.Fragment,{children:[t,(!t||!l)&&r]}),a=!o&&"whitespace-nowrap flex items-center justify-start gap-10",s=!o&&"outline-none focus-visible:ring-2";return e.type==="link"?A.jsxs("a",{className:k(a,i==null?void 0:i({isActive:!1}),s,g),href:e.action,target:e.target,"data-menu-item-id":e.id,ref:h,...v,children:[y,n]}):A.jsxs(W,{end:typeof c=="function"?c(e.action):c,className:f=>k(a,i==null?void 0:i(f),s,g),to:e.action,target:e.target,"data-menu-item-id":e.id,ref:h,...v,children:[y,n]})});export{me as C,he as I,ge as S,fe as a,ue as b,Z as c,ae as d,ce as e,ye as h,de as o,pe as u,j as v};
