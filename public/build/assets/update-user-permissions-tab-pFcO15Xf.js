import{h as a,i as m,s as u,t as p,m as c,q as l,k as d,b8 as i,j as o,aP as x,d as f,T as j}from"./client-OfhJa1Pp.js";import{D as U,a as F}from"./crupdate-resource-layout-D52z_ZDE.js";import{o as h}from"./custom-menu-BbwshV9x.js";import{U as S}from"./user-role-section-CAb9QmwL.js";import{F as g}from"./permission-selector-IaWi5pV6.js";import"./datatable-page-with-header-layout-B1YkbSHJ.js";import"./main-CqFMqK8-.js";import"./use-toggle-dashboard-left-sidebar-CnzMOFB9.js";import"./toggle-left-sidebar-icon-Dq5ZwqwZ.js";import"./form-chip-field-sH5S7-lx.js";import"./chip-list-CkGaRoaT.js";import"./accordion-DWEV-mKU.js";import"./accordtion-animation-BGCK95Hj.js";import"./uc-first-pSl3nM3z.js";function v(r,s){const e=a();return m({mutationFn:t=>C(r,t),onSuccess:()=>{p(c("User updated")),l.invalidateQueries({queryKey:["users"]}),e("../..",{relative:"path"})},onError:t=>s?h(t,s):u(t)})}function C(r,s){return s.roles&&(s.roles=s.roles.map(e=>e.id)),d.put(`users/${r}`,s).then(e=>e.data)}function E({form:r,children:s}){const e=i(),t=v(e.id,r);return o.jsxs(x,{onSubmit:n=>{t.mutate(n)},onBeforeSubmit:()=>r.clearErrors(),form:r,children:[s,o.jsx(U,{isLoading:t.isPending})]})}function M(){const r=i(),s=f({defaultValues:{permissions:r.permissions,roles:r.roles}});return o.jsxs(E,{form:s,children:[o.jsx(S,{}),o.jsx(F,{label:o.jsx(j,{message:"Permissions"}),children:o.jsx(g,{name:"permissions"})})]})}export{M as Component};
