import{j as e,aP as T,B as d,T as s,aQ as N,t as y,m,ae as A,d as g,F as f,aG as j,az as b,A as P,aR as C,r as V,L as z,av as G,al as k,b3 as D,i as E,s as q,k as B,q as H}from"./client-OfhJa1Pp.js";import{Q as u,S as L,g as v}from"./main-CqFMqK8-.js";import{P as M}from"./toggle-preview-button-xp_UTzfM.js";import{a as Q,A as R}from"./accordion-DWEV-mKU.js";import{u as K,A as U}from"./ai-agent-page-header-BnoGBePt.js";import{F as W,B as I,S as w,a as $,b as J}from"./SentimentVerySatisfied-ChS7u0W9.js";import{F as O}from"./form-chip-field-sH5S7-lx.js";import{F as x}from"./radio-Db_caP9D.js";import{F as X}from"./select-Dsco87dL.js";import{F as Y}from"./image-selector-Bwr5VwEQ.js";import{F as Z}from"./file-upload-provider-DTPBUrkd.js";import{A as _}from"./ArrowForward-COs0hk5q.js";import{u as F,a as ee}from"./custom-menu-BbwshV9x.js";import{C as se}from"./confirmation-dialog-BIOq1A-h.js";import"./widget-flags-DGIUgINI.js";import"./use-widget-bootstrap-data-BlKRRco5.js";import"./datatable-page-with-header-layout-B1YkbSHJ.js";import"./use-toggle-dashboard-left-sidebar-CnzMOFB9.js";import"./toggle-left-sidebar-icon-Dq5ZwqwZ.js";import"./RestartAlt-BBLLDvr_.js";import"./use-is-module-installed-FCoToztC.js";import"./dashboard-icons-CHop3mns.js";import"./library-icon-CHCHM-UW.js";import"./messages-square-icon-CTmom_u4.js";import"./Delete-BhyMZiPM.js";import"./Home--R_oEr6a.js";import"./SupervisorAccount-k9OnPB-d.js";import"./accordtion-animation-BGCK95Hj.js";import"./admin-config-tfY5n3F7.js";import"./Translate-Cs-ut2nW.js";import"./TextFields-8TfbEP0O.js";import"./use-url-backed-tabs-D_W8N2tz.js";import"./tabs-BfUlcoJh.js";import"./book-open-Cbdc52Ur.js";import"./Add-CN0r1QLK.js";import"./chip-list-CkGaRoaT.js";import"./combobox-end-adornment-CaH5Sr_u.js";import"./use-active-upload-CCDRf1Tl.js";import"./open-upload-window-CSDcieK1.js";import"./uploaded-file-DN6fXT4v.js";import"./shallow-BSWIanyL.js";import"./AddAPhoto-eWqbbo4Z.js";import"./progress-bar-iRLStr1h.js";import"./file-input-config-DrcTpI3-.js";import"./pretty-bytes-bO14ePu9.js";import"./with-selector-CDgEpx5P.js";function p({label:i,description:a,icon:n,children:l,form:t,...r}){const c=K(t);return e.jsx(Q,{label:i,description:a,startIcon:n,buttonPadding:"p-20",bodyPadding:"p-20",labelClassName:"text-sm font-medium",descriptionClassName:"text-sm text-muted",startIconColor:"text-main",...r,children:e.jsxs(T,{form:t,onSubmit:o=>c.mutate({config:o},{onSuccess:()=>{y(m("Changes saved"))}}),onBeforeSubmit:()=>t.clearErrors(),children:[l,e.jsxs("div",{className:"mt-24",children:[e.jsx(d,{variant:"flat",color:"primary",type:"submit",startIcon:e.jsx(N,{}),className:"mr-8",size:"xs",disabled:c.isPending,children:e.jsx(s,{message:"Save"})}),e.jsx(d,{variant:"outline",type:"button",size:"xs",disabled:c.isPending,onClick:()=>{t.reset(),r.expandedValues&&r.setExpandedValues&&r.setExpandedValues(r.expandedValues.filter(o=>o!==r.value))},children:e.jsx(s,{message:"Cancel"})})]})]})})}function ae(i){var t;const{trans:a}=A(),n=u(),l=g({defaultValues:{cantAssist:{instruction:((t=n.config.cantAssist)==null?void 0:t.instruction)??""}}});return e.jsx(p,{...i,label:e.jsx(s,{message:"If AI agent is unable to assist user"}),description:e.jsx(s,{message:"Choose what happens when AI agent is unable to help the customer"}),icon:e.jsx(W,{}),form:l,children:e.jsx(f,{name:"cantAssist.instruction",label:e.jsx(s,{message:"Instruction (optional)"}),inputElementType:"textarea",rows:2,className:"mb-16",placeholder:a({message:"say why you are unable to help and ask if you can help with something else."})})})}function te(i){var t,r,c;const a=u(),n=g({defaultValues:{greetingType:a.config.greetingType??"basicGreeting",initialFlowId:a.config.initialFlowId??((t=a.flows[0])==null?void 0:t.id)??"",basicGreeting:{message:((r=a.config.basicGreeting)==null?void 0:r.message)??"",flowIds:((c=a.config.basicGreeting)==null?void 0:c.flowIds)??[]}}}),l=j({control:n.control,name:"greetingType"});return e.jsxs(p,{...i,label:e.jsx(s,{message:"Start of the conversation"}),description:e.jsx(s,{message:"Show a greeting and buttons or start with a flow"}),icon:e.jsx(ne,{}),form:n,children:[e.jsxs("div",{className:"mb-28",children:[e.jsx(x,{name:"greetingType",value:"basicGreeting",size:"sm",children:e.jsx(s,{message:"Send a greeting message and show buttons"})}),l==="basicGreeting"&&e.jsxs("div",{className:"pl-24 pt-16",children:[e.jsx(f,{name:"basicGreeting.message",label:e.jsx(s,{message:"Message"}),inputElementType:"textarea",rows:4,className:"mb-16"}),e.jsx(O,{name:"basicGreeting.flowIds",label:e.jsx(s,{message:"Flows (up to 10)"}),allowCustomValue:!1,maxItems:10,valueKey:"id",displayWith:o=>{var h;return((h=a.flows.find(S=>S.id===o.id))==null?void 0:h.name)??""},suggestions:a.flows,children:o=>e.jsx(b,{value:o.id,children:o.name},o.id)})]})]}),e.jsxs("div",{children:[e.jsx(x,{name:"greetingType",value:"flow",size:"sm",children:e.jsx(s,{message:"Start with a specific flow"})}),l==="flow"&&e.jsx("div",{className:"pl-24 pt-16",children:e.jsx(X,{name:"initialFlowId",selectionMode:"single",label:e.jsx(s,{message:"Select a flow"}),required:!0,children:a.flows.map(o=>e.jsx(b,{value:o.id,children:o.name},o.id))})})]})]})}const ne=P(e.jsx("path",{d:"M7.03,4.95L3.49,8.49c-3.32,3.32-3.32,8.7,0,12.02s8.7,3.32,12.02,0l6.01-6.01c0.97-0.97,0.97-2.56,0-3.54 c-0.12-0.12-0.25-0.23-0.39-0.32l0.39-0.39c0.97-0.97,0.97-2.56,0-3.54c-0.16-0.16-0.35-0.3-0.54-0.41c0.4-0.92,0.23-2.02-0.52-2.77 c-0.87-0.87-2.22-0.96-3.2-0.28c-0.1-0.15-0.21-0.29-0.34-0.42c-0.97-0.97-2.56-0.97-3.54,0l-2.51,2.51 c-0.09-0.14-0.2-0.27-0.32-0.39C9.58,3.98,8,3.98,7.03,4.95z M8.44,6.37c0.2-0.2,0.51-0.2,0.71,0c0.2,0.2,0.2,0.51,0,0.71 l-3.18,3.18c1.17,1.17,1.17,3.07,0,4.24l1.41,1.41c1.45-1.45,1.82-3.57,1.12-5.36l6.3-6.3c0.2-0.2,0.51-0.2,0.71,0s0.2,0.51,0,0.71 l-4.6,4.6l1.41,1.41l6.01-6.01c0.2-0.2,0.51-0.2,0.71,0c0.2,0.2,0.2,0.51,0,0.71l-6.01,6.01l1.41,1.41l4.95-4.95 c0.2-0.2,0.51-0.2,0.71,0c0.2,0.2,0.2,0.51,0,0.71l-5.66,5.66l1.41,1.41l3.54-3.54c0.2-0.2,0.51-0.2,0.71,0c0.2,0.2,0.2,0.51,0,0.71 L14.1,19.1c-2.54,2.54-6.65,2.54-9.19,0s-2.54-6.65,0-9.19L8.44,6.37z M23,17c0,3.31-2.69,6-6,6v-1.5c2.48,0,4.5-2.02,4.5-4.5H23z M1,7c0-3.31,2.69-6,6-6v1.5C4.52,2.5,2.5,4.52,2.5,7H1z"}),"WavingHand");function ie(i){const a=u(),n=g({defaultValues:{name:a.config.name,image:a.config.image}});return e.jsxs(p,{...i,label:e.jsx(s,{message:"Identity"}),description:e.jsx(s,{message:"Name and avatar"}),icon:e.jsx(I,{}),form:n,children:[e.jsx(f,{name:"name",label:e.jsx(s,{message:"Name"}),description:e.jsx(s,{message:"The name your customers will see."}),required:!0,className:"mb-16"}),e.jsx(Z,{children:e.jsx(Y,{name:"image",uploadType:C.brandingImages,label:e.jsx(s,{message:"Avatar"}),className:"max-w-400",showRemoveButton:!0,descriptionPosition:"bottom",description:e.jsx(s,{message:"Use a JPG, PNG, or GIF smaller than 100KB. 50px by 50px works best."})})})]})}const re=[{name:"friendly",label:m("Friendly"),icon:w},{name:"neutral",label:m("Neutral"),icon:$},{name:"professional",label:m("Professional"),icon:I},{name:"humorous",label:m("Humorous"),icon:J}];function oe(i){const a=u(),n=g({defaultValues:{personality:a.config.personality??"neutral"}}),l=j({control:n.control,name:"personality"});return e.jsx(p,{...i,label:e.jsx(s,{message:"Personality"}),description:e.jsx(s,{message:"Determines tone of voice for AI generated messages"}),icon:e.jsx(w,{}),form:n,children:e.jsx("div",{className:"flex items-center gap-12",children:re.map(t=>e.jsx(d,{value:t.name,startIcon:e.jsx(t.icon,{}),variant:"outline",color:l===t.name?"primary":void 0,onClick:()=>n.setValue("personality",t.name),size:"sm",className:"min-h-46 min-w-208",children:e.jsx(s,{...t.label})},t.name))})})}function le(i){var r,c;const{trans:a}=A(),n=u(),l=g({defaultValues:{transfer:{type:((r=n.config.transfer)==null?void 0:r.type)??"basicTransfer",instruction:((c=n.config.transfer)==null?void 0:c.instruction)??""}}}),t=j({control:l.control,name:"transfer.type"});return e.jsxs(p,{...i,label:e.jsx(s,{message:"Transfer to human"}),description:e.jsx(s,{message:"If customer asks to speak to human agent"}),icon:e.jsx(L,{}),form:l,children:[e.jsx("div",{className:"mb-28",children:e.jsx(x,{name:"transfer.type",value:"basicTransfer",size:"sm",children:e.jsx(s,{message:"Transfer customer to first available agent or put into queue"})})}),e.jsxs("div",{children:[e.jsx(x,{name:"transfer.type",value:"instruction",size:"sm",children:e.jsx(s,{message:"Custom instruction"})}),t==="instruction"&&e.jsx("div",{className:"pl-24 pt-16",children:e.jsx(f,{required:!0,name:"transfer.instruction",inputElementType:"textarea",rows:2,className:"mb-16",placeholder:a({message:"say that there are no available agents right now and ask if you can help instead"})})})]})]})}function as(){const[i,a]=V.useState(!1),{aiAgentId:n}=F(["aiAgentId"]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"dashboard-grid-content dashboard-rounded-panel flex h-full flex-col",children:[e.jsx(U,{previewVisible:i,onTogglePreview:()=>a(!i)}),e.jsx("div",{className:"flex-auto overflow-y-auto p-24",children:e.jsxs("div",{children:[e.jsxs(R,{variant:"outline",gap:"space-y-24",children:[e.jsx(ie,{}),e.jsx(oe,{}),e.jsx(te,{}),e.jsx(ae,{}),e.jsx(le,{})]}),e.jsxs("div",{className:"mt-24 flex items-center justify-between gap-24 pl-8",children:[e.jsx(d,{elementType:z,to:"/admin/settings/ai",variant:"link",color:"primary",startIcon:e.jsx(_,{}),children:e.jsx(s,{message:"Additional AI settings"})}),e.jsxs(G,{type:"modal",children:[e.jsx(d,{variant:"text",size:"xs",children:e.jsx(s,{message:"Delete AI Agent"})}),e.jsx(ce,{})]})]})]})})]}),i&&e.jsx(M,{onClose:()=>a(!1)})]},n)}function ce(){const{data:i}=ee(v.agents.index()),{close:a}=k(),n=D(),{aiAgentId:l}=F(["aiAgentId"]),t=E({mutationFn:()=>B.delete(`lc/ai-agents/${l}`),onSuccess:()=>{var c;const r=(c=i.aiAgents.find(o=>`${o.id}`!==l))==null?void 0:c.id;r&&n(`../../${r}`,{replace:!0}),H.invalidateQueries({queryKey:v.invalidateKey}),y(m("AI Agent deleted")),a()},onError:r=>q(r)});return e.jsx(se,{isDanger:!0,title:e.jsx(s,{message:"Delete AI Agent"}),body:e.jsx(s,{message:"Are you sure you want to delete this AI agent?"}),onConfirm:()=>{t.mutate()},confirm:e.jsx(s,{message:"Delete"}),isLoading:t.isPending})}export{as as Component};
