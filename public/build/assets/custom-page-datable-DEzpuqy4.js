import{j as e,L as c,T as a,H as f,aj as w,b2 as u,m as r,b1 as x,r as n,aZ as C,av as S,B as P,al as T,i as k,s as v,k as F,q as E,t as L}from"./client-OfhJa1Pp.js";import{A}from"./admin-config-tfY5n3F7.js";import{y as B,i as I,j as q,l as H,c as y}from"./main-CqFMqK8-.js";import{a as M}from"./name-with-avatar-DcHWBlN8.js";import{L as N}from"./external-link-DbBk1ItZ.js";import{E as _}from"./Edit-JNj6SFDx.js";import{D as O}from"./settings-links-D22SAe6v.js";import{G as R}from"./global-loading-progress-CKXIm6JS.js";import{D as U}from"./data-table-add-item-button-2jwTYQ5G.js";import{D as Q}from"./data-table-header-CeAVoFvI.js";import{D as W}from"./data-table-pagination-footer-CEEx1VtI.js";import{u as V}from"./use-datatable-search-params-CQGreY35.js";import{D as $}from"./data-table-emty-state-message-DLsG3g03.js";import{D as z}from"./datatable-filters-C2DdpqvR.js";import{a as G,D as K,b as Z,c as J}from"./datatable-page-with-header-layout-B1YkbSHJ.js";import{u as X}from"./use-datatable-query-BQ-GXlzU.js";import{T as Y}from"./table-BifRiqkr.js";import{C as ee}from"./confirmation-dialog-BIOq1A-h.js";import"./dashboard-icons-CHop3mns.js";import"./library-icon-CHCHM-UW.js";import"./messages-square-icon-CTmom_u4.js";import"./Delete-BhyMZiPM.js";import"./Home--R_oEr6a.js";import"./SupervisorAccount-k9OnPB-d.js";import"./Translate-Cs-ut2nW.js";import"./TextFields-8TfbEP0O.js";import"./custom-menu-BbwshV9x.js";import"./skeleton-Cp2m1Uyc.js";import"./book-open-Cbdc52Ur.js";import"./Add-CN0r1QLK.js";import"./FilterAlt-CXibH0wr.js";import"./select-filter-panel-C_zo36WK.js";import"./form-chip-field-sH5S7-lx.js";import"./chip-list-CkGaRoaT.js";import"./filter-operator-names-BZog1mvA.js";import"./select-Dsco87dL.js";import"./combobox-end-adornment-CaH5Sr_u.js";import"./normalized-model-field-COxh0lBC.js";import"./accordion-DWEV-mKU.js";import"./accordtion-animation-BGCK95Hj.js";import"./checkbox-C4s6ROxp.js";import"./CheckBoxOutlineBlank-DQZJM1Yc.js";import"./formatted-number-DuD1Sa1W.js";import"./use-toggle-dashboard-left-sidebar-CnzMOFB9.js";import"./toggle-left-sidebar-icon-Dq5ZwqwZ.js";import"./ArrowDownward-mN9PlQJw.js";import"./useEffectEvent-DQn3o5L0.js";import"./is-ctrl-key-pressed-BWsUhNJl.js";import"./useGlobalListeners-CeWFSHKo.js";const te=[{key:"slug",allowsSorting:!0,width:"flex-2 min-w-200",visibleInMode:"all",header:()=>e.jsx(a,{message:"Slug"}),body:t=>e.jsx(c,{target:"_blank",to:`/pages/${t.slug}`,className:N,children:t.slug})},{key:"user_id",allowsSorting:!0,width:"flex-2 min-w-140",header:()=>e.jsx(a,{message:"Owner"}),body:t=>t.user&&e.jsx(M,{image:t.user.image,label:t.user.name,description:t.user.email,avatarCircle:!0})},{key:"type",maxWidth:"max-w-100",header:()=>e.jsx(a,{message:"Type"}),body:t=>e.jsx(a,{message:t.type})},{key:"updated_at",allowsSorting:!0,width:"w-100",header:()=>e.jsx(a,{message:"Last updated"}),body:t=>e.jsx(f,{date:t.updated_at})},{key:"actions",header:()=>e.jsx(a,{message:"Actions"}),hideHeader:!0,align:"end",width:"w-84 flex-shrink-0",visibleInMode:"all",body:t=>e.jsx(w,{size:"md",className:"text-muted",elementType:c,to:`${t.id}/edit`,children:e.jsx(_,{})})}],ae=""+new URL("articles-sEigaVBk.svg",import.meta.url).href,se=t=>{const o=t.customPages.types.length>1?[{control:{type:x.Select,defaultValue:"default",options:t.customPages.types.map(s=>({value:s.type,label:s.label,key:s.type}))},key:"type",label:r("Type"),description:r("Type of the page"),defaultOperator:u.eq}]:[];return[{key:"user_id",label:r("User"),description:r("User page was created by"),defaultOperator:u.eq,control:{type:x.SelectModel,model:B}},...o,I({description:r("Date page was created")}),q({description:r("Date page was last updated")})]};function et(){const t=n.useContext(H),[o,s]=n.useState([]),{searchParams:i,sortDescriptor:m,mergeIntoSearchParams:d,setSearchQuery:h,isFiltering:j}=V(C),g=n.useMemo(()=>se(t),[t]),l=X({...y.customPages.index({...i})}),b=e.jsxs(S,{type:"modal",children:[e.jsx(P,{variant:"flat",color:"danger",children:e.jsx(a,{message:"Delete"})}),e.jsx(oe,{selectedIds:o,onDelete:()=>s([])})]}),D=e.jsx(n.Fragment,{children:e.jsx(U,{elementType:c,to:"new",children:e.jsx(a,{message:"New page"})})});return e.jsxs(G,{children:[e.jsx(R,{query:l}),e.jsx(K,{title:e.jsx(a,{message:"Custom pages"}),showSidebarToggleButton:!0,rightContent:e.jsx(O,{variant:"button",link:A.pages.customPages,size:"xs"})}),e.jsxs(Z,{children:[e.jsx(Q,{searchValue:i.query,onSearchChange:h,actions:D,selectedItems:o,selectedActions:b,filters:g}),e.jsx(z,{filters:g}),e.jsxs(J,{children:[e.jsx(Y,{columns:te,data:l.items,sortDescriptor:m,onSortChange:d,enableSelection:!0,selectedRows:o,onSelectionChange:s}),l.isEmpty&&e.jsx($,{isFiltering:j,image:ae,title:e.jsx(a,{message:"No pages have been created yet"}),filteringTitle:e.jsx(a,{message:"No matching pages"})}),e.jsx(W,{query:l,onPageChange:p=>d({page:p}),onPerPageChange:p=>d({perPage:p})})]})]})]})}function oe({selectedIds:t,onDelete:o}){const{close:s}=T(),i=k({mutationFn:()=>F.delete(`custom-pages/${t.join(",")}`).then(m=>m.data),onSuccess:()=>{E.invalidateQueries({queryKey:y.customPages.invalidateKey}),L(r("Pages deleted")),o(),s()},onError:m=>v(m)});return e.jsx(ee,{isLoading:i.isPending,onConfirm:()=>i.mutate(),title:e.jsx(a,{message:"Delete pages"}),body:e.jsx(a,{message:"Are you sure you want to delete selected pages?"}),confirm:e.jsx(a,{message:"Delete"})})}export{et as Component};
