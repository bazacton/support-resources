import{b3 as x,i as d,s as l,t as c,m as g,q as u,k as m,j as e,T as r,r as p,a_ as j,aj as o}from"./client-OfhJa1Pp.js";import{g as i,h}from"./main-CqFMqK8-.js";import{K as y,D as f}from"./knowledge-preview-layout-BcsQlixa.js";import{D as I}from"./datatable-page-with-header-layout-B1YkbSHJ.js";import{u as b,a as k}from"./custom-menu-BbwshV9x.js";import{B as v,a}from"./breadcrumb-DMWJORWM.js";import{O as K}from"./OpenInNew-Q67MT6Ae.js";import{S as P}from"./Sync-6-pU802x.js";import"./Delete-BhyMZiPM.js";import"./Visibility-BkaRhH0o.js";import"./confirmation-dialog-BIOq1A-h.js";import"./use-toggle-dashboard-left-sidebar-CnzMOFB9.js";import"./toggle-left-sidebar-icon-Dq5ZwqwZ.js";import"./useEffectEvent-DQn3o5L0.js";import"./ChevronRight-T5gg5A4x.js";import"./MoreHoriz-hMMIYAbm.js";function B(){const t=x();return d({mutationFn:async({websiteId:s,webpageId:n})=>m.delete(`lc/ai-agent/websites/${s}/webpages/${n}`),onSuccess:()=>{c(g("Webpage deleted")),t("..",{relative:"path"}),u.invalidateQueries({queryKey:i.knowledge.invalidateKey})},onError:s=>l(s)})}function S(){return d({mutationFn:async({webpageId:t})=>m.post(`lc/ai-agent/webpages/${t}/sync`),onSuccess:()=>{c(g("Webpage content synced")),u.invalidateQueries({queryKey:i.knowledge.invalidateKey})},onError:t=>l(t)})}function G(){const{websiteId:t,webpageId:s}=b(["websiteId","webpageId"]),{data:n}=k(i.webpages.get(t,s)),w=e.jsx(I,{rightContent:e.jsx(D,{webpage:n.webpage}),showSidebarToggleButton:!0,children:e.jsxs(v,{size:"xl",children:[e.jsx(a,{to:"../knowledge",children:e.jsx(r,{message:"Knowledge"})}),e.jsx(a,{to:"../knowledge/websites",children:e.jsx(r,{message:"Websites"})}),e.jsx(a,{to:`../knowledge/websites/${t}/pages`,children:n.website.title}),e.jsx(a,{children:n.webpage.title})]})});return e.jsxs(p.Fragment,{children:[e.jsx(h,{children:e.jsx(r,{message:"Knowledge - Webpages"})}),e.jsx(y,{markdown:n.webpage.markdown,header:w})]})}function D({webpage:t}){const s=S();return e.jsxs(p.Fragment,{children:[e.jsx(j,{label:e.jsx(r,{message:"Refresh content"}),children:e.jsx(o,{variant:"outline",size:"sm",disabled:s.isPending||!t.fully_scanned||t.scan_pending,onClick:()=>{s.mutate({webpageId:t.id})},children:e.jsx(P,{})})}),e.jsx(T,{}),e.jsx(o,{variant:"outline",size:"sm",elementType:"a",href:t.url,target:"_blank",children:e.jsx(K,{})})]})}function T(){const t=B(),{websiteId:s,webpageId:n}=b(["websiteId","webpageId"]);return e.jsx(f,{isPending:t.isPending,onDelete:()=>t.mutateAsync({webpageId:n,websiteId:s})})}export{G as Component};
