import{h as u,aZ as g,l as x,j as e,T as s,L as d,S as h,x as j,aX as f,r as c,av as b,aw as D,aj as y,ax as S,az as p}from"./client-OfhJa1Pp.js";import{A as T}from"./admin-config-tfY5n3F7.js";import{T as v}from"./team-index-page-tabs-BgzP8ioE.js";import{D as k}from"./delete-group-dialog-Bi1GY0TI.js";import{h as P}from"./helpdesk-channel-CQKSbeKg.js";import{u as A,O as C}from"./online-status-circle-QXiKm4xe.js";import{t as w}from"./team-DYmDDGxN.js";import{D as I}from"./settings-links-D22SAe6v.js";import{G as N}from"./global-loading-progress-CKXIm6JS.js";import{a as G}from"./name-with-avatar-DcHWBlN8.js";import{D as O}from"./data-table-add-item-button-2jwTYQ5G.js";import{D as H}from"./data-table-header-CeAVoFvI.js";import{D as M}from"./data-table-pagination-footer-CEEx1VtI.js";import{u as B}from"./use-datatable-search-params-CQGreY35.js";import{D as E}from"./data-table-emty-state-message-DLsG3g03.js";import{a as L,D as z,b as $,c as F}from"./datatable-page-with-header-layout-B1YkbSHJ.js";import{u as Q}from"./use-datatable-query-BQ-GXlzU.js";import{h as W}from"./main-CqFMqK8-.js";import{T as q}from"./table-BifRiqkr.js";import{A as U}from"./avatar-group-DoAzKV83.js";import{M as V}from"./MoreHoriz-hMMIYAbm.js";import{S as R}from"./skeleton-Cp2m1Uyc.js";import"./dashboard-icons-CHop3mns.js";import"./library-icon-CHCHM-UW.js";import"./messages-square-icon-CTmom_u4.js";import"./Delete-BhyMZiPM.js";import"./Home--R_oEr6a.js";import"./SupervisorAccount-k9OnPB-d.js";import"./Translate-Cs-ut2nW.js";import"./TextFields-8TfbEP0O.js";import"./tabs-BfUlcoJh.js";import"./confirmation-dialog-BIOq1A-h.js";import"./HourglassEmpty-BpvqVftp.js";import"./external-link-DbBk1ItZ.js";import"./book-open-Cbdc52Ur.js";import"./Add-CN0r1QLK.js";import"./FilterAlt-CXibH0wr.js";import"./select-filter-panel-C_zo36WK.js";import"./form-chip-field-sH5S7-lx.js";import"./chip-list-CkGaRoaT.js";import"./filter-operator-names-BZog1mvA.js";import"./select-Dsco87dL.js";import"./combobox-end-adornment-CaH5Sr_u.js";import"./normalized-model-field-COxh0lBC.js";import"./Edit-JNj6SFDx.js";import"./accordion-DWEV-mKU.js";import"./accordtion-animation-BGCK95Hj.js";import"./checkbox-C4s6ROxp.js";import"./CheckBoxOutlineBlank-DQZJM1Yc.js";import"./custom-menu-BbwshV9x.js";import"./use-toggle-dashboard-left-sidebar-CnzMOFB9.js";import"./toggle-left-sidebar-icon-Dq5ZwqwZ.js";import"./ArrowDownward-mN9PlQJw.js";import"./useEffectEvent-DQn3o5L0.js";import"./is-ctrl-key-pressed-BWsUhNJl.js";import"./useGlobalListeners-CeWFSHKo.js";const X=[{key:"name",allowsSorting:!0,visibleInMode:"all",header:()=>e.jsx(s,{message:"Group"}),body:a=>{var t;return e.jsx(G,{label:e.jsx(s,{message:a.name}),avatarLabel:a.name,alwaysShowAvatar:!0,description:e.jsx(s,{message:"[one 1 member|other :count members]",values:{count:((t=a.users)==null?void 0:t.length)||0}})})}},{key:"members",header:()=>e.jsx(s,{message:"Members"}),body:a=>{var t;return e.jsx(U,{className:"min-h-40",children:(t=a.users)==null?void 0:t.map(r=>e.jsx(h,{src:r.image,label:r.name,link:`/users/${r.id}`,fallback:"initials"},r.id))})}},{key:"status",header:()=>e.jsx(s,{message:"Status"}),body:a=>{var t;return j().settings.websockets_setup?e.jsx(Z,{group:a}):e.jsx(s,{message:"[one 1 member|other :count members]",values:{count:((t=a.users)==null?void 0:t.length)??1}})}},{key:"default",header:()=>e.jsx(s,{message:"Default"}),hideHeader:!0,body:a=>a.default?e.jsx(f,{className:"w-max",radius:"rounded-panel",size:"sm",children:e.jsx(s,{message:"Default"})}):null},{key:"actions",header:()=>e.jsx(s,{message:"Actions"}),hideHeader:!0,visibleInMode:"all",align:"end",width:"w-42 flex-shrink-0",body:a=>e.jsx(_,{group:a})}];function Z({group:a}){var m,l;const r=A(o=>o.presence)[P.name];if(!r)return e.jsx(R,{className:"max-w-200"});const n=((m=a.users)==null?void 0:m.filter(o=>r.find(i=>i.isAgent&&i.modelId===o.id)).length)||0;return e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx(C,{isOnline:!!n}),e.jsx(s,{message:":count of :total online",values:{count:n,total:((l=a.users)==null?void 0:l.length)||0}})]})}function _({group:a}){const[t,r]=c.useState(!1);return e.jsxs(c.Fragment,{children:[e.jsx(b,{type:"modal",isOpen:t,onOpenChange:r,children:e.jsx(k,{groupId:a.id})}),e.jsxs(D,{children:[e.jsx(y,{size:"md",className:"text-muted",children:e.jsx(V,{})}),e.jsxs(S,{children:[e.jsx(p,{value:"edit",elementType:d,to:`${a.id}/edit`,children:e.jsx(s,{message:"Edit"})}),e.jsx(p,{value:"reports",elementType:d,to:`/dashboard/reports/groups/${a.id}`,children:e.jsx(s,{message:"View reports"})}),!a.default&&e.jsx(p,{value:"delete",className:"text-danger",onSelected:()=>{r(!0)},children:e.jsx(s,{message:"Delete"})})]})]})]})}function ea(){const a=u(),{searchParams:t,sortDescriptor:r,mergeIntoSearchParams:n,setSearchQuery:m,isFiltering:l}=B(g),o=Q(x.groups.index(t));return e.jsxs(L,{children:[e.jsx(N,{query:o}),e.jsx(W,{children:e.jsx(s,{message:"Team - Groups"})}),e.jsx(z,{title:e.jsx(s,{message:"Team"}),showSidebarToggleButton:!0,border:"border-none",rightContent:e.jsx(I,{variant:"button",link:T.pages.groups,size:"xs"})}),e.jsx(v,{}),e.jsxs($,{children:[e.jsx(H,{searchValue:t.query,onSearchChange:m,actions:e.jsx(J,{})}),e.jsxs(F,{children:[e.jsx(q,{columns:X,data:o.items,sortDescriptor:r,onSortChange:n,enableSelection:!1,cellHeight:"h-70",onAction:i=>{a(`${i.id}/edit`)}}),o.isEmpty&&e.jsx(E,{isFiltering:l,className:"mt-44",image:w,title:e.jsx(s,{message:"No groups have been created yet"}),filteringTitle:e.jsx(s,{message:"No matching groups"})}),e.jsx(M,{hideIfOnlyOnePage:!0,query:o,onPageChange:i=>n({page:i}),onPerPageChange:i=>n({perPage:i})})]})]})]})}function J(){return e.jsx(O,{elementType:d,to:"new",children:e.jsx(s,{message:"Add new group"})})}export{ea as Component};
