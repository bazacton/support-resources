import{i as D,s as w,q as C,l as g,k as v,j as e,T as t,aQ as S,as as k,H as T,a_ as u,aj as h,L as j,av as P,r as A,p as R,al as I,b1 as d,b2 as m,m as s,h as E,aY as F,b_ as N}from"./client-OfhJa1Pp.js";import{A as M}from"./admin-config-tfY5n3F7.js";import{a as O}from"./name-with-avatar-DcHWBlN8.js";import{a as q,T as H}from"./table-BifRiqkr.js";import{D as L}from"./Delete-BhyMZiPM.js";import{E as _}from"./Edit-JNj6SFDx.js";import{C as B}from"./confirmation-dialog-BIOq1A-h.js";import{y as Q,i as U,j as z}from"./main-CqFMqK8-.js";import{o as G}from"./online-articles-CqWeBVNj.js";import{D as W}from"./settings-links-D22SAe6v.js";import{G as $}from"./global-loading-progress-CKXIm6JS.js";import{D as K}from"./data-table-add-item-button-2jwTYQ5G.js";import{D as V}from"./data-table-header-CeAVoFvI.js";import{D as Y}from"./data-table-pagination-footer-CEEx1VtI.js";import{u as J}from"./use-datatable-search-params-CQGreY35.js";import{D as X}from"./data-table-emty-state-message-DLsG3g03.js";import{D as Z}from"./datatable-filters-C2DdpqvR.js";import{a as ee,D as ae,b as te,c as se}from"./datatable-page-with-header-layout-B1YkbSHJ.js";import{u as re}from"./use-datatable-query-BQ-GXlzU.js";import"./dashboard-icons-CHop3mns.js";import"./library-icon-CHCHM-UW.js";import"./messages-square-icon-CTmom_u4.js";import"./Home--R_oEr6a.js";import"./SupervisorAccount-k9OnPB-d.js";import"./Translate-Cs-ut2nW.js";import"./TextFields-8TfbEP0O.js";import"./skeleton-Cp2m1Uyc.js";import"./checkbox-C4s6ROxp.js";import"./CheckBoxOutlineBlank-DQZJM1Yc.js";import"./ArrowDownward-mN9PlQJw.js";import"./useEffectEvent-DQn3o5L0.js";import"./is-ctrl-key-pressed-BWsUhNJl.js";import"./useGlobalListeners-CeWFSHKo.js";import"./custom-menu-BbwshV9x.js";import"./external-link-DbBk1ItZ.js";import"./book-open-Cbdc52Ur.js";import"./Add-CN0r1QLK.js";import"./FilterAlt-CXibH0wr.js";import"./select-filter-panel-C_zo36WK.js";import"./form-chip-field-sH5S7-lx.js";import"./chip-list-CkGaRoaT.js";import"./filter-operator-names-BZog1mvA.js";import"./select-Dsco87dL.js";import"./combobox-end-adornment-CaH5Sr_u.js";import"./normalized-model-field-COxh0lBC.js";import"./accordion-DWEV-mKU.js";import"./accordtion-animation-BGCK95Hj.js";import"./formatted-number-DuD1Sa1W.js";import"./use-toggle-dashboard-left-sidebar-CnzMOFB9.js";import"./toggle-left-sidebar-icon-Dq5ZwqwZ.js";function ie(){return D({mutationFn:a=>oe(a),onSuccess:async()=>{await C.invalidateQueries({queryKey:g.cannedReplies.invalidateKey})},onError:a=>w(a)})}function oe(a){return v.delete(`helpdesk/canned-replies/${a.ids.join(",")}`).then(r=>r.data)}const ne=[{key:"name",width:"flex-2 min-w-200",visibleInMode:"all",header:()=>e.jsx(t,{message:"Saved reply"}),body:a=>e.jsx(le,{reply:a})},{key:"user_id",allowsSorting:!0,width:"w-180",header:()=>e.jsx(t,{message:"Owner"}),body:a=>a.user?e.jsx(O,{image:a.user.image,label:a.user.name,avatarCircle:!0}):null},{key:"shared",allowsSorting:!0,width:"w-80 flex-shrink-0",header:()=>e.jsx(t,{message:"Shared"}),body:a=>a.shared?e.jsx(S,{size:"md",className:"text-positive"}):e.jsx(k,{size:"md",className:"text-danger"})},{key:"updatedAt",allowsSorting:!0,width:"w-124",header:()=>e.jsx(t,{message:"Last updated"}),body:a=>e.jsx("time",{children:e.jsx(T,{date:a.updated_at})})},{key:"actions",header:()=>e.jsx(t,{message:"Actions"}),width:"w-84 flex-shrink-0",hideHeader:!0,align:"end",visibleInMode:"all",body:a=>e.jsxs("div",{className:"text-muted",children:[e.jsx(u,{label:e.jsx(t,{message:"Edit reply"}),children:e.jsx(h,{size:"md",elementType:j,to:`${a.id}/update`,children:e.jsx(_,{})})}),e.jsxs(P,{type:"modal",children:[e.jsx(u,{label:e.jsx(t,{message:"Delete reply"}),children:e.jsx(h,{children:e.jsx(L,{})})}),e.jsx(de,{reply:a})]})]})}];function le({reply:a}){const{isCollapsedMode:r}=A.useContext(q);return e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:R(r?"line-clamp-2":"overflow-hidden overflow-ellipsis whitespace-nowrap font-medium"),children:a.name}),e.jsx("p",{className:"mt-4 max-w-850 whitespace-normal text-xs text-muted",children:a.description})]})}function de({reply:a}){const r=ie(),{close:n}=I();return e.jsx(B,{isDanger:!0,isLoading:r.isPending,title:e.jsx(t,{message:"Delete saved reply"}),body:e.jsx(t,{message:"Are you sure you want to delete this saved reply?"}),confirm:e.jsx(t,{message:"Delete"}),onConfirm:()=>{r.mutate({ids:[a.id]},{onSuccess:()=>n()})}})}const x=[{key:"shared",label:s("Shared"),description:s("Whether reply is marked as shared"),defaultOperator:m.eq,control:{type:d.BooleanToggle,defaultValue:!0}},{key:"user_id",label:s("Owner"),description:s("User this reply was created by"),defaultOperator:m.eq,control:{type:d.SelectModel,model:Q}},{key:"group_id",label:s("Group"),description:s("Group this reply belongs to"),defaultOperator:m.eq,control:{type:d.SelectModel,model:"group"}},U({description:s("Date reply was created")}),z({description:s("Date reply was last updated")})];function na(){const a=E(),n=F().some(i=>{var c;return!!((c=i.handle)!=null&&c.forCurrentUser)}),{searchParams:p,sortDescriptor:y,mergeIntoSearchParams:l,setSearchQuery:f,isFiltering:b}=J(N),o=re({...g.cannedReplies.index({...p,forCurrentUser:n})});return e.jsxs(ee,{children:[e.jsx($,{query:o}),e.jsx(ae,{title:e.jsx(t,{message:"Saved replies"}),showSidebarToggleButton:!0,rightContent:e.jsx(W,{variant:"button",link:M.pages.savedReplies,size:"xs"})}),e.jsxs(te,{children:[e.jsx(V,{actions:e.jsx(me,{}),searchValue:p.query,onSearchChange:f,filters:x}),e.jsx(Z,{filters:x}),e.jsxs(se,{children:[e.jsx(H,{columns:ne,data:o.items,sortDescriptor:y,onSortChange:l,enableSelection:!1,cellHeight:"h-80",onAction:i=>{a(`${i.id}/update`)}}),o.isEmpty&&e.jsx(X,{image:G,isFiltering:b,title:e.jsx(t,{message:"No saved replies have been created yet"}),filteringTitle:e.jsx(t,{message:"No matching replies"})}),e.jsx(Y,{hideIfOnlyOnePage:!0,query:o,onPageChange:i=>l({page:i}),onPerPageChange:i=>l({perPage:i})})]})]})]})}function me(){return e.jsx(K,{elementType:j,to:"new",children:e.jsx(t,{message:"Add reply"})})}export{na as Component};
