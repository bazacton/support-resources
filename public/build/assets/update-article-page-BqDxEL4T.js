import{i as j,s as f,q as y,k as v,j as t,B as n,T as s,a as P,ae as A,d as _,r as C,b5 as E,aR as T,p as k,L as I,t as F,m as N}from"./client-OfhJa1Pp.js";import{a as S,A as B}from"./use-create-article-CtBgq2Pl.js";import{H as w}from"./hc-article-editor-breadcrumb-BnP0k_3v.js";import{o as U,h as c,a as q}from"./custom-menu-BbwshV9x.js";import{g as H}from"./article-link-xsQ04UkN.js";import{A as Q}from"./article-editor-page-HCga2mrA.js";import{h as V}from"./main-CqFMqK8-.js";import{a as L}from"./breadcrumb-DMWJORWM.js";import{O as z}from"./OpenInNew-Q67MT6Ae.js";import"./file-type-icon-Dok_AF4H.js";import"./file-upload-provider-DTPBUrkd.js";import"./uploaded-file-DN6fXT4v.js";import"./pretty-bytes-bO14ePu9.js";import"./with-selector-CDgEpx5P.js";import"./progress-bar-iRLStr1h.js";import"./open-upload-window-CSDcieK1.js";import"./normalized-model-field-COxh0lBC.js";import"./select-Dsco87dL.js";import"./combobox-end-adornment-CaH5Sr_u.js";import"./Edit-JNj6SFDx.js";import"./skeleton-Cp2m1Uyc.js";import"./accordion-DWEV-mKU.js";import"./accordtion-animation-BGCK95Hj.js";import"./checkbox-C4s6ROxp.js";import"./CheckBoxOutlineBlank-DQZJM1Yc.js";import"./managed-by-field-D7JPY3A-.js";import"./visible-to-field-I5OzeH9w.js";import"./form-chip-field-sH5S7-lx.js";import"./chip-list-CkGaRoaT.js";import"./slugify-string-aubjgLQq.js";import"./Undo-D06cFnP3.js";import"./tiptap-editor-context-BAgvnYfz.js";import"./list-buttons-BgDZUgyW.js";import"./FormatListNumbered-rvs8UAfH.js";import"./index-W-EjzbYI.js";import"./Link-DfTxpaxj.js";import"./color-picker-dialog-C1vQg-H6.js";import"./FormatColorFill-8XiV_8LV.js";import"./image-button-ExYLUK-F.js";import"./image-up-DCwS84Wx.js";import"./use-active-upload-CCDRf1Tl.js";import"./shallow-BSWIanyL.js";import"./MoreVert-Ci70_mZh.js";import"./PriorityHigh-C-SfNUlB.js";import"./datatable-page-with-header-layout-B1YkbSHJ.js";import"./use-toggle-dashboard-left-sidebar-CnzMOFB9.js";import"./toggle-left-sidebar-icon-Dq5ZwqwZ.js";import"./ArrowBack-DcV9hHRo.js";import"./index-DTFmR8Ac.js";import"./core-Dg-ESrC8.js";import"./index-RecbqAl0.js";import"./dashboard-sidenav-B5THGxpt.js";import"./toggle-right-sidebar-icon-DXM314Tt.js";import"./useEffectEvent-DQn3o5L0.js";import"./ChevronRight-T5gg5A4x.js";import"./MoreHoriz-hMMIYAbm.js";function u(r){return j({mutationFn:e=>D(e),onSuccess:async()=>{await y.invalidateQueries({queryKey:c.articles.invalidateKey})},onError:e=>r?U(e,r):f(e)})}function D({id:r,...e}){return v.put(`hc/articles/${r}`,S(e)).then(o=>o.data)}function K({article:r}){const e=u();return t.jsx(n,{variant:"link",color:"primary",disabled:e.isPending,onClick:()=>{e.mutate({id:r.id,draft:!r.draft})},children:r.draft?t.jsx(s,{message:"Publish"}):t.jsx(s,{message:"Unpublish"})})}function $t(){var d;const{articleId:r,categoryId:e,sectionId:o}=P(),p=q(c.articles.getForUpdateArticlePage({articleId:r,categoryId:e,sectionId:o})),i=p.data.article,{trans:x}=A(),a=_({defaultValues:{title:i.title,slug:i.slug,visible_to_role:i.visible_to_role||"",managed_by_role:i.managed_by_role||"",author_id:i.author_id,sections:(d=i.sections)==null?void 0:d.map(m=>m.id),tags:i.tags,attachments:i.attachments}}),l=u(a),g=()=>{l.mutate({...a.getValues(),id:i.id},{onSuccess:()=>{F(x(N("Article updated")))}})},b=t.jsx(n,{variant:"flat",color:"primary",size:"xs",onClick:()=>g(),disabled:l.isPending,children:t.jsx(s,{message:"Save"})}),h=t.jsx(w,{children:t.jsx(L,{children:t.jsx(s,{message:"Edit"})})});return t.jsxs(C.Fragment,{children:[t.jsx(V,{children:p.data.article.title}),t.jsx(E,{...a,children:t.jsx(Q,{imageUploadType:T.articleImages,title:h,saveButton:b,aside:t.jsx(B,{children:t.jsx(O,{article:i})}),initialContent:i.body,onChange:m=>{a.setValue("body",m,{shouldDirty:!0})}})})]})}function O({article:r}){var e;return t.jsxs("div",{className:"mb-28 border-b pb-14 text-sm",children:[t.jsx("div",{className:"mb-8 font-semibold",children:t.jsx(s,{message:"Publication status"})}),t.jsxs("div",{className:"flex items-center",children:[t.jsxs("div",{className:"mr-10 flex items-center gap-8 border-r pr-10",children:[t.jsx("div",{className:k("h-12 w-12 rounded-full border",r.draft?"border-divider":"border-transparent bg-positive")}),r.draft?t.jsx(s,{message:"Draft"}):t.jsx(s,{message:"Published"})]}),t.jsx(K,{article:r})]}),t.jsx(n,{variant:"link",color:"primary",elementType:I,to:H(r,{section:(e=r.sections)==null?void 0:e[0]}),endIcon:t.jsx(z,{}),target:"_blank",size:"xs",className:"mt-18",children:t.jsx(s,{message:"Preview in Help Center"})})]})}export{$t as Component,O as PublicationStatus};
